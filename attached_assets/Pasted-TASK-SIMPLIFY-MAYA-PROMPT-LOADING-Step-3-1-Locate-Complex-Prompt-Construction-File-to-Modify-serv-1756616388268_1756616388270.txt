TASK: SIMPLIFY MAYA PROMPT LOADING
Step 3.1: Locate Complex Prompt Construction
File to Modify: server/routes/maya-unified.ts
Find the main Maya conversation endpoint (around line 425) and look for complex prompt layering:
typescript// FIND complex construction like this:
const baseMayaPersonality = PersonalityManager.getNaturalPrompt('maya');
const contextEnhancement = enhancePromptForContext(/* ... */);
const personalBrandContext = extractPersonalBrandContext(/* ... */);
const additionalInstructions = /* ... */;
const finalPrompt = baseMayaPersonality + contextEnhancement + personalBrandContext + additionalInstructions;
Step 3.2: Replace with Simple Construction
REPLACE complex layering with simple approach:
typescript// SIMPLE: Single personality load with minimal context
const mayaPersonality = PersonalityManager.getNaturalPrompt('maya');

// Add only essential request context
const requestContext = `Current request: ${message}`;

// Single API call construction
const response = await fetch('https://api.anthropic.com/v1/messages', {
  method: 'POST',
  headers: {
    'Content-Type': 'application/json',
    'x-api-key': process.env.ANTHROPIC_API_KEY,
  },
  body: JSON.stringify({
    model: 'claude-3-5-sonnet-20241022',
    max_tokens: 8000,
    system: mayaPersonality, // Contains ALL Maya intelligence from Phase 2
    messages: [
      ...fullConversationHistory,
      { role: 'user', content: requestContext }
    ]
  })
});
Step 3.3: Remove Unused Variables
Delete any variables no longer needed after simplification:
typescript// DELETE these if they exist and are no longer used:
// const contextEnhancement = ...
// const personalBrandContext = ...  
// const additionalInstructions = ...
// const enhancedPrompt = ...
Step 3.4: Update Any Other Complex Constructions
Search for other complex prompt layering in the same file and simplify similarly.

VERIFICATION STEPS

Complexity Reduced: No more 5-layer prompt construction
Simple Loading: Only PersonalityManager.getNaturalPrompt('maya') used
Functionality Intact: Maya responds with full personality
No Broken References: All unused variables removed
Clean Code: Simplified, readable prompt construction

SUCCESS CRITERIA

 Complex prompt layering replaced with simple system
 Only 2-layer construction (personality + request context)
 Unused prompt variables removed
 Maya maintains full functionality and personality
 Server compiles and runs without errors

WHAT NOT TO TOUCH

Do not modify the personality system (personality-config.ts)
Do not change Maya's core responses or capabilities
Do not attempt verification testing beyond basic functionality
Do not modify other route handlers

TESTING PROTOCOL
Basic Functionality Test:

Start server
Send simple message to Maya
Verify she responds with her personality intact
Confirm no errors in console

COMPLETION REPORT FORMAT
PHASE 3 COMPLETE - PROMPT SIMPLIFICATION

Changes Made:
- Complex prompt construction removed: YES/NO
- Simple 2-layer system implemented: YES/NO
- Unused variables removed: YES/NO
- Single personality loading confirmed: YES/NO

Technical Verification:
- Server compilation: PASS/FAIL
- Server startup: PASS/FAIL
- Basic Maya functionality: PASS/FAIL
- Console error check: CLEAN/ERRORS FOUND

Code Quality:
- Prompt construction simplified: YES/NO
- Readable and maintainable: YES/NO
- No redundant logic: YES/NO

Status: PHASE 3 COMPLETE / ISSUES FOUND
Issues: [List any problems encountered]

Ready for Phase 4 (Final Testing): YES/NO
Complete Phase 3 entirely before requesting final testing phase.