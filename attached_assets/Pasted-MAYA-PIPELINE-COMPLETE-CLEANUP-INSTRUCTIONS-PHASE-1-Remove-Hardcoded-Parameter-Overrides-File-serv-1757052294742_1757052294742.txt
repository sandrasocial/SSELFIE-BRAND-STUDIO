MAYA PIPELINE COMPLETE CLEANUP INSTRUCTIONS
PHASE 1: Remove Hardcoded Parameter Overrides
File: server/model-training-service.ts
ðŸŽ¯ CRITICAL REMOVAL - Lines 86-91:
typescript// REMOVE THESE LINES COMPLETELY:
let fluxParams = {
  guidance_scale: 3.5, // Default balanced setting
  num_inference_steps: 45, // Default balanced setting
  lora_scale: 1.1, // Optimal LoRA weight for all shots
};
ðŸ”§ REPLACE WITH:
typescript// Maya's AI intelligence determines ALL parameters - no hardcoded overrides
let fluxParams = null; // Will be set by Maya's intelligence

ðŸŽ¯ CRITICAL REMOVAL - Lines 93-145 (Complete shot type detection logic):
typescript// REMOVE THIS ENTIRE BLOCK - LINES 93-145:
// INTELLIGENT SHOT TYPE DETECTION: Analyze Maya's prompt for optimal FLUX parameters
const promptLower = finalPrompt.toLowerCase();

// SHOT TYPE DETECTION with aspect ratio optimization
let detectedShotType = "default";
let aspectRatio = "4:5"; // Default IG-friendly ratio

if (
  promptLower.includes("close-up") ||
  promptLower.includes("headshot") ||
  promptLower.includes("f/1.8") ||
  promptLower.includes("f/2.0")
) {
  // CLOSE-UP PORTRAIT: Lower guidance for more realistic close-up portraits
  fluxParams = {
    guidance_scale: 2.8,
    num_inference_steps: 40,
    lora_scale: 1.1,
  };
  aspectRatio = "4:5"; // IG-friendly close-up portrait ratio
  detectedShotType = "closeUpPortrait";
  console.log(
    `ðŸ“¸ FLUX OPTIMIZATION: Close-up portrait detected - using guidance_scale: 2.8, steps: 40, aspect_ratio: 4:5`,
  );
} else if (
  promptLower.includes("half-body") ||
  promptLower.includes("three-quarter") ||
  promptLower.includes("portrait") ||
  promptLower.includes("50mm") ||
  promptLower.includes("85mm") ||
  promptLower.includes("f/2.2") ||
  promptLower.includes("f/2.8")
) {
  // HALF-BODY SHOT: Higher guidance for detailed styling showcase
  fluxParams = {
    guidance_scale: 5,
    num_inference_steps: 50,
    lora_scale: 1.1,
  };
  aspectRatio = "3:4"; // Vertical that shows outfit/pose
  detectedShotType = "halfBodyShot";
  console.log(
    `ðŸ“¸ FLUX OPTIMIZATION: Half-body shot detected - using guidance_scale: 5, steps: 50, aspect_ratio: 3:4`,
  );
} else if (
  promptLower.includes("full") ||
  promptLower.includes("scene") ||
  promptLower.includes("environmental") ||
  promptLower.includes("24mm") ||
  promptLower.includes("35mm") ||
  promptLower.includes("f/4") ||
  promptLower.includes("f/5.6") ||
  promptLower.includes("f/8")
) {
  // FULL SCENE: Higher guidance for complex scene composition
  fluxParams = {
    guidance_scale: 5,
    num_inference_steps: 50,
    lora_scale: 1.1,
  };
  aspectRatio = "3:2"; // Breathe and show environment
  detectedShotType = "fullScenery";
  console.log(
    `ðŸ“¸ FLUX OPTIMIZATION: Full scene detected - using guidance_scale: 5, steps: 50, aspect_ratio: 3:2`,
  );
} else {
  aspectRatio = "4:5"; // Default IG-friendly ratio
  console.log(
    `ðŸ“¸ FLUX OPTIMIZATION: Auto-detect using balanced parameters - guidance_scale: 3.5, steps: 45, aspect_ratio: 4:5`,
  );
}
ðŸ”§ REPLACE WITH:
typescript// âœ… MAYA PURE INTELLIGENCE: Trust Maya's complete parameter selection
// Maya's AI handles shot type detection, aspect ratio, and all FLUX parameters
const fluxParams = {
  guidance_scale: 3.5,  // Maya's default - will be overridden by her intelligence
  num_inference_steps: 28, // Maya's default - will be overridden by her intelligence  
  lora_scale: 0.8, // Maya's default - will be overridden by her intelligence
};
const aspectRatio = "4:5"; // Maya's default - will be overridden by her intelligence

console.log(`ðŸŽ¯ MAYA PURE INTELLIGENCE: Using Maya's embedded parameter intelligence`);
