{
  "timestamp": "2025-09-15T18:45:59.258Z",
  "summary": {
    "total": 83,
    "passed": 59,
    "failed": 2,
    "warnings": 0,
    "critical": 0
  },
  "readinessScore": 71,
  "results": {
    "critical": [],
    "warnings": [],
    "info": [
      {
        "message": "ğŸ” Checking package.json configuration...",
        "details": "",
        "timestamp": "2025-09-15T18:44:57.786Z"
      },
      {
        "message": "ğŸ” Checking environment configuration...",
        "details": "",
        "timestamp": "2025-09-15T18:44:57.794Z"
      },
      {
        "message": "ğŸ” Checking critical components...",
        "details": "",
        "timestamp": "2025-09-15T18:44:57.795Z"
      },
      {
        "message": "ğŸ” Checking build configuration...",
        "details": "",
        "timestamp": "2025-09-15T18:44:57.795Z"
      },
      {
        "message": "ğŸ” Checking test configuration...",
        "details": "",
        "timestamp": "2025-09-15T18:44:57.796Z"
      },
      {
        "message": "ğŸ” Checking security configuration...",
        "details": "",
        "timestamp": "2025-09-15T18:45:59.247Z"
      },
      {
        "message": "ğŸ” Checking performance optimizations...",
        "details": "",
        "timestamp": "2025-09-15T18:45:59.248Z"
      },
      {
        "message": "ğŸ” Checking accessibility features...",
        "details": "",
        "timestamp": "2025-09-15T18:45:59.248Z"
      },
      {
        "message": "ğŸ” Checking user journey completeness...",
        "details": "",
        "timestamp": "2025-09-15T18:45:59.249Z"
      },
      {
        "message": "ğŸ” Checking API integration...",
        "details": "",
        "timestamp": "2025-09-15T18:45:59.252Z"
      },
      {
        "message": "API endpoints to verify:",
        "details": "/api/auth/user, /api/gallery-images, /api/maya/generated-images, /api/images/favorites, /api/user-model, /api/payment/create-checkout-session",
        "timestamp": "2025-09-15T18:45:59.254Z"
      },
      {
        "message": "ğŸ” Checking mobile responsiveness...",
        "details": "",
        "timestamp": "2025-09-15T18:45:59.254Z"
      },
      {
        "message": "ğŸ” Checking error handling...",
        "details": "",
        "timestamp": "2025-09-15T18:45:59.256Z"
      },
      {
        "message": "ğŸ“Š Generating launch readiness report...",
        "details": "",
        "timestamp": "2025-09-15T18:45:59.256Z"
      }
    ],
    "pass": [
      {
        "message": "âœ“ Script 'dev' defined",
        "details": "cd server && npx tsx index.ts",
        "timestamp": "2025-09-15T18:44:57.793Z"
      },
      {
        "message": "âœ“ Script 'build' defined",
        "details": "vite build client",
        "timestamp": "2025-09-15T18:44:57.793Z"
      },
      {
        "message": "âœ“ Script 'test' defined",
        "details": "jest",
        "timestamp": "2025-09-15T18:44:57.794Z"
      },
      {
        "message": "âœ“ Script 'start' defined",
        "details": "cd server && npx tsx index.ts",
        "timestamp": "2025-09-15T18:44:57.794Z"
      },
      {
        "message": "âœ“ Dependency 'react' installed",
        "details": "19.0.0",
        "timestamp": "2025-09-15T18:44:57.794Z"
      },
      {
        "message": "âœ“ Dependency 'react-dom' installed",
        "details": "19.0.0",
        "timestamp": "2025-09-15T18:44:57.794Z"
      },
      {
        "message": "âœ“ Dependency '@stackframe/react' installed",
        "details": "^2.8.36",
        "timestamp": "2025-09-15T18:44:57.794Z"
      },
      {
        "message": "âœ“ Dependency '@tanstack/react-query' installed",
        "details": "^5.48.0",
        "timestamp": "2025-09-15T18:44:57.794Z"
      },
      {
        "message": "âœ“ Dependency 'vite' installed",
        "details": "^7.1.2",
        "timestamp": "2025-09-15T18:44:57.794Z"
      },
      {
        "message": "âœ“ Dev dependency 'typescript' installed",
        "details": "^5.9.2",
        "timestamp": "2025-09-15T18:44:57.794Z"
      },
      {
        "message": "âœ“ Dependency 'tailwindcss' installed",
        "details": "^3.4.17",
        "timestamp": "2025-09-15T18:44:57.794Z"
      },
      {
        "message": "âœ“ .env file exists",
        "details": "",
        "timestamp": "2025-09-15T18:44:57.794Z"
      },
      {
        "message": "âœ“ Environment variable 'STACK_PROJECT_ID' defined",
        "details": "",
        "timestamp": "2025-09-15T18:44:57.795Z"
      },
      {
        "message": "âœ“ Environment variable 'STACK_PUBLISHABLE_CLIENT_KEY' defined",
        "details": "",
        "timestamp": "2025-09-15T18:44:57.795Z"
      },
      {
        "message": "âœ“ Critical component: App.tsx",
        "details": "/Users/MD760HA/SSELFIE-BRAND-STUDIO/client/src/App.tsx",
        "timestamp": "2025-09-15T18:44:57.795Z"
      },
      {
        "message": "âœ“ Critical component: AppLayout.tsx",
        "details": "/Users/MD760HA/SSELFIE-BRAND-STUDIO/client/src/pages/AppLayout.tsx",
        "timestamp": "2025-09-15T18:44:57.795Z"
      },
      {
        "message": "âœ“ Critical component: member-navigation.tsx",
        "details": "/Users/MD760HA/SSELFIE-BRAND-STUDIO/client/src/components/member-navigation.tsx",
        "timestamp": "2025-09-15T18:44:57.795Z"
      },
      {
        "message": "âœ“ Critical component: global-footer.tsx",
        "details": "/Users/MD760HA/SSELFIE-BRAND-STUDIO/client/src/components/global-footer.tsx",
        "timestamp": "2025-09-15T18:44:57.795Z"
      },
      {
        "message": "âœ“ Critical component: MobileTabLayout.tsx",
        "details": "/Users/MD760HA/SSELFIE-BRAND-STUDIO/client/src/components/MobileTabLayout.tsx",
        "timestamp": "2025-09-15T18:44:57.795Z"
      },
      {
        "message": "âœ“ Critical component: sselfie-gallery.tsx",
        "details": "/Users/MD760HA/SSELFIE-BRAND-STUDIO/client/src/pages/sselfie-gallery.tsx",
        "timestamp": "2025-09-15T18:44:57.795Z"
      },
      {
        "message": "âœ“ Critical component: maya-categorized-gallery.tsx",
        "details": "/Users/MD760HA/SSELFIE-BRAND-STUDIO/client/src/components/maya-categorized-gallery.tsx",
        "timestamp": "2025-09-15T18:44:57.795Z"
      },
      {
        "message": "âœ“ Critical component: simple-training.tsx",
        "details": "/Users/MD760HA/SSELFIE-BRAND-STUDIO/client/src/pages/simple-training.tsx",
        "timestamp": "2025-09-15T18:44:57.795Z"
      },
      {
        "message": "âœ“ Critical component: simple-checkout.tsx",
        "details": "/Users/MD760HA/SSELFIE-BRAND-STUDIO/client/src/pages/simple-checkout.tsx",
        "timestamp": "2025-09-15T18:44:57.795Z"
      },
      {
        "message": "âœ“ Critical component: payment-success.tsx",
        "details": "/Users/MD760HA/SSELFIE-BRAND-STUDIO/client/src/pages/payment-success.tsx",
        "timestamp": "2025-09-15T18:44:57.795Z"
      },
      {
        "message": "âœ“ Critical component: use-auth.ts",
        "details": "/Users/MD760HA/SSELFIE-BRAND-STUDIO/client/src/hooks/use-auth.ts",
        "timestamp": "2025-09-15T18:44:57.795Z"
      },
      {
        "message": "âœ“ Critical component: ProtectedRoute.tsx",
        "details": "/Users/MD760HA/SSELFIE-BRAND-STUDIO/client/src/components/ProtectedRoute.tsx",
        "timestamp": "2025-09-15T18:44:57.795Z"
      },
      {
        "message": "âœ“ Build config: vite.config.ts",
        "details": "/Users/MD760HA/SSELFIE-BRAND-STUDIO/vite.config.ts",
        "timestamp": "2025-09-15T18:44:57.795Z"
      },
      {
        "message": "âœ“ Build config: tsconfig.json",
        "details": "/Users/MD760HA/SSELFIE-BRAND-STUDIO/tsconfig.json",
        "timestamp": "2025-09-15T18:44:57.796Z"
      },
      {
        "message": "âœ“ Build output directory exists",
        "details": "",
        "timestamp": "2025-09-15T18:44:57.796Z"
      },
      {
        "message": "âœ“ Build output contains index.html",
        "details": "",
        "timestamp": "2025-09-15T18:44:57.796Z"
      },
      {
        "message": "âœ“ Build output contains assets",
        "details": "",
        "timestamp": "2025-09-15T18:44:57.796Z"
      },
      {
        "message": "âœ“ Test config: jest.config.js",
        "details": "/Users/MD760HA/SSELFIE-BRAND-STUDIO/jest.config.js",
        "timestamp": "2025-09-15T18:44:57.796Z"
      },
      {
        "message": "âœ“ Test config: playwright.config.ts",
        "details": "/Users/MD760HA/SSELFIE-BRAND-STUDIO/playwright.config.ts",
        "timestamp": "2025-09-15T18:44:57.796Z"
      },
      {
        "message": "âœ“ Test config: tests/e2e-comprehensive-user-journey.spec.ts",
        "details": "/Users/MD760HA/SSELFIE-BRAND-STUDIO/tests/e2e-comprehensive-user-journey.spec.ts",
        "timestamp": "2025-09-15T18:44:57.796Z"
      },
      {
        "message": "âœ“ Security config: .gitignore",
        "details": "/Users/MD760HA/SSELFIE-BRAND-STUDIO/.gitignore",
        "timestamp": "2025-09-15T18:45:59.247Z"
      },
      {
        "message": "âœ“ Security config: vercel.json",
        "details": "/Users/MD760HA/SSELFIE-BRAND-STUDIO/vercel.json",
        "timestamp": "2025-09-15T18:45:59.247Z"
      },
      {
        "message": "âœ“ .gitignore excludes .env",
        "details": "",
        "timestamp": "2025-09-15T18:45:59.248Z"
      },
      {
        "message": "âœ“ .gitignore excludes node_modules",
        "details": "",
        "timestamp": "2025-09-15T18:45:59.248Z"
      },
      {
        "message": "âœ“ .gitignore excludes dist",
        "details": "",
        "timestamp": "2025-09-15T18:45:59.248Z"
      },
      {
        "message": "âœ“ Performance optimization: performanceOptimizations.ts",
        "details": "/Users/MD760HA/SSELFIE-BRAND-STUDIO/client/src/utils/performanceOptimizations.ts",
        "timestamp": "2025-09-15T18:45:59.248Z"
      },
      {
        "message": "âœ“ Performance optimization: webVitals.ts",
        "details": "/Users/MD760HA/SSELFIE-BRAND-STUDIO/client/src/utils/webVitals.ts",
        "timestamp": "2025-09-15T18:45:59.248Z"
      },
      {
        "message": "âœ“ Performance optimization: useMemoryCleanup.ts",
        "details": "/Users/MD760HA/SSELFIE-BRAND-STUDIO/client/src/hooks/useMemoryCleanup.ts",
        "timestamp": "2025-09-15T18:45:59.248Z"
      },
      {
        "message": "âœ“ App uses lazy loading",
        "details": "",
        "timestamp": "2025-09-15T18:45:59.248Z"
      },
      {
        "message": "âœ“ Accessibility component: ErrorBoundary.tsx",
        "details": "/Users/MD760HA/SSELFIE-BRAND-STUDIO/client/src/components/ErrorBoundary.tsx",
        "timestamp": "2025-09-15T18:45:59.249Z"
      },
      {
        "message": "âœ“ member-navigation.tsx has ARIA attributes",
        "details": "",
        "timestamp": "2025-09-15T18:45:59.249Z"
      },
      {
        "message": "âœ“ MobileTabLayout.tsx has ARIA attributes",
        "details": "",
        "timestamp": "2025-09-15T18:45:59.249Z"
      },
      {
        "message": "âœ“ User journey step: Landing Page",
        "details": "/Users/MD760HA/SSELFIE-BRAND-STUDIO/client/src/pages/business-landing.tsx",
        "timestamp": "2025-09-15T18:45:59.249Z"
      },
      {
        "message": "âœ“ User journey step: Authentication",
        "details": "/Users/MD760HA/SSELFIE-BRAND-STUDIO/client/src/components/UnifiedLoginButton.tsx",
        "timestamp": "2025-09-15T18:45:59.251Z"
      },
      {
        "message": "âœ“ User journey step: Training Flow",
        "details": "/Users/MD760HA/SSELFIE-BRAND-STUDIO/client/src/pages/simple-training.tsx",
        "timestamp": "2025-09-15T18:45:59.251Z"
      },
      {
        "message": "âœ“ User journey step: Main App",
        "details": "/Users/MD760HA/SSELFIE-BRAND-STUDIO/client/src/pages/AppLayout.tsx",
        "timestamp": "2025-09-15T18:45:59.251Z"
      },
      {
        "message": "âœ“ User journey step: Gallery",
        "details": "/Users/MD760HA/SSELFIE-BRAND-STUDIO/client/src/pages/sselfie-gallery.tsx",
        "timestamp": "2025-09-15T18:45:59.251Z"
      },
      {
        "message": "âœ“ User journey step: Profile",
        "details": "/Users/MD760HA/SSELFIE-BRAND-STUDIO/client/src/pages/profile.tsx",
        "timestamp": "2025-09-15T18:45:59.251Z"
      },
      {
        "message": "âœ“ User journey step: Checkout",
        "details": "/Users/MD760HA/SSELFIE-BRAND-STUDIO/client/src/pages/simple-checkout.tsx",
        "timestamp": "2025-09-15T18:45:59.251Z"
      },
      {
        "message": "âœ“ User journey step: Payment Success",
        "details": "/Users/MD760HA/SSELFIE-BRAND-STUDIO/client/src/pages/payment-success.tsx",
        "timestamp": "2025-09-15T18:45:59.252Z"
      },
      {
        "message": "âœ“ API integration: queryClient.ts",
        "details": "/Users/MD760HA/SSELFIE-BRAND-STUDIO/client/src/lib/queryClient.ts",
        "timestamp": "2025-09-15T18:45:59.252Z"
      },
      {
        "message": "âœ“ API integration: services",
        "details": "/Users/MD760HA/SSELFIE-BRAND-STUDIO/client/src/services",
        "timestamp": "2025-09-15T18:45:59.253Z"
      },
      {
        "message": "âœ“ Error handling: ErrorBoundary.tsx",
        "details": "/Users/MD760HA/SSELFIE-BRAND-STUDIO/client/src/components/ErrorBoundary.tsx",
        "timestamp": "2025-09-15T18:45:59.256Z"
      },
      {
        "message": "âœ“ Error handling: ProtectedRoute.tsx",
        "details": "/Users/MD760HA/SSELFIE-BRAND-STUDIO/client/src/components/ProtectedRoute.tsx",
        "timestamp": "2025-09-15T18:45:59.256Z"
      },
      {
        "message": "âœ“ App.tsx has error handling",
        "details": "",
        "timestamp": "2025-09-15T18:45:59.256Z"
      }
    ],
    "fail": [
      {
        "message": "âœ— Build config: tailwind.config.js",
        "details": "File not found: /Users/MD760HA/SSELFIE-BRAND-STUDIO/tailwind.config.js",
        "timestamp": "2025-09-15T18:44:57.796Z"
      },
      {
        "message": "âœ— Build config: postcss.config.js",
        "details": "File not found: /Users/MD760HA/SSELFIE-BRAND-STUDIO/postcss.config.js",
        "timestamp": "2025-09-15T18:44:57.796Z"
      }
    ],
    "warn": [
      {
        "message": "âš  Environment variable 'STRIPE_PUBLISHABLE_KEY' not found",
        "details": "",
        "timestamp": "2025-09-15T18:44:57.795Z"
      },
      {
        "message": "âš  Environment variable 'VITE_API_BASE_URL' not found",
        "details": "",
        "timestamp": "2025-09-15T18:44:57.795Z"
      },
      {
        "message": "âš  .env.example file not found",
        "details": "",
        "timestamp": "2025-09-15T18:44:57.795Z"
      },
      {
        "message": "âš  Test suite has issues",
        "details": "Command failed: npm test -- --passWithNoTests\nFAIL server/__tests__/routes/maya.test.ts\n  â— Console\n\n    console.log\n      ğŸ§ª Phase 6 Testing Framework initialized\n\n      at Object.<anonymous> (jest.setup.js:31:11)\n\n    console.log\n      ğŸ§ª Phase 6 Testing Framework completed\n\n      at Object.<anonymous> (jest.setup.js:35:11)\n\n  â— Maya Routes â€º POST /api/maya/chat â€º should handle Maya chat message successfully\n\n    expected 200 \"OK\", got 404 \"Not Found\"\n\n      33 |         .post('/api/maya/chat')\n      34 |         .send({ message: 'Hello Maya' })\n    > 35 |         .expect(200);\n         |          ^\n      36 |\n      37 |       expect(response.body).toEqual({\n      38 |         success: true,\n\n      at Object.<anonymous> (server/__tests__/routes/maya.test.ts:35:10)\n      ----\n      at Test._assertStatus (node_modules/supertest/lib/test.js:309:14)\n      at node_modules/supertest/lib/test.js:365:13\n      at Test._assertFunction (node_modules/supertest/lib/test.js:342:13)\n      at Test.assert (node_modules/supertest/lib/test.js:195:23)\n      at localAssert (node_modules/supertest/lib/test.js:138:14)\n      at Server.<anonymous> (node_modules/supertest/lib/test.js:152:11)\n\n  â— Maya Routes â€º GET /api/maya/chat/:chatId â€º should get Maya chat history\n\n    expected 200 \"OK\", got 404 \"Not Found\"\n\n      49 |       const response = await request(app)\n      50 |         .get('/api/maya/chat/chat123')\n    > 51 |         .expect(200);\n         |          ^\n      52 |\n      53 |       expect(response.body).toEqual({\n      54 |         success: true,\n\n      at Object.<anonymous> (server/__tests__/routes/maya.test.ts:51:10)\n      ----\n      at Test._assertStatus (node_modules/supertest/lib/test.js:309:14)\n      at node_modules/supertest/lib/test.js:365:13\n      at Test._assertFunction (node_modules/supertest/lib/test.js:342:13)\n      at Test.assert (node_modules/supertest/lib/test.js:195:23)\n      at localAssert (node_modules/supertest/lib/test.js:138:14)\n      at Server.<anonymous> (node_modules/supertest/lib/test.js:152:11)\n\n  â— Maya Routes â€º POST /api/maya/chat/:chatId/message â€º should send message to Maya chat\n\n    expected 200 \"OK\", got 404 \"Not Found\"\n\n      67 |         .post('/api/maya/chat/chat123/message')\n      68 |         .send({ message: 'New message to Maya' })\n    > 69 |         .expect(200);\n         |          ^\n      70 |\n      71 |       expect(response.body).toEqual({\n      72 |         success: true,\n\n      at Object.<anonymous> (server/__tests__/routes/maya.test.ts:69:10)\n      ----\n      at Test._assertStatus (node_modules/supertest/lib/test.js:309:14)\n      at node_modules/supertest/lib/test.js:365:13\n      at Test._assertFunction (node_modules/supertest/lib/test.js:342:13)\n      at Test.assert (node_modules/supertest/lib/test.js:195:23)\n      at localAssert (node_modules/supertest/lib/test.js:138:14)\n      at Server.<anonymous> (node_modules/supertest/lib/test.js:152:11)\n\n  â— Maya Routes â€º GET /api/maya/chats â€º should get all Maya chats for user\n\n    expected 200 \"OK\", got 404 \"Not Found\"\n\n      84 |       const response = await request(app)\n      85 |         .get('/api/maya/chats')\n    > 86 |         .expect(200);\n         |          ^\n      87 |\n      88 |       expect(response.body).toEqual({\n      89 |         success: true,\n\n      at Object.<anonymous> (server/__tests__/routes/maya.test.ts:86:10)\n      ----\n      at Test._assertStatus (node_modules/supertest/lib/test.js:309:14)\n      at node_modules/supertest/lib/test.js:365:13\n      at Test._assertFunction (node_modules/supertest/lib/test.js:342:13)\n      at Test.assert (node_modules/supertest/lib/test.js:195:23)\n      at localAssert (node_modules/supertest/lib/test.js:138:14)\n      at Server.<anonymous> (node_modules/supertest/lib/test.js:152:11)\n\nFAIL server/__tests__/routes/auth.test.ts\n  â— Console\n\n    console.log\n      ğŸ§ª Phase 6 Testing Framework initialized\n\n      at Object.<anonymous> (jest.setup.js:31:11)\n\n    console.log\n      ğŸ§ª Phase 6 Testing Framework completed\n\n      at Object.<anonymous> (jest.setup.js:35:11)\n\n  â— Auth Routes â€º GET /api/auth/user â€º should return user data when user exists\n\n    expected 200 \"OK\", got 500 \"Internal Server Error\"\n\n      57 |       const response = await request(app)\n      58 |         .get('/api/auth/user')\n    > 59 |         .expect(200);\n         |          ^\n      60 |\n      61 |       expect(response.body).toEqual({\n      62 |         success: true,\n\n      at Object.<anonymous> (server/__tests__/routes/auth.test.ts:59:10)\n      ----\n      at Test._assertStatus (node_modules/supertest/lib/test.js:309:14)\n      at node_modules/supertest/lib/test.js:365:13\n      at Test._assertFunction (node_modules/supertest/lib/test.js:342:13)\n      at Test.assert (node_modules/supertest/lib/test.js:195:23)\n      at localAssert (node_modules/supertest/lib/test.js:138:14)\n      at Server.<anonymous> (node_modules/supertest/lib/test.js:152:11)\n\n  â— Auth Routes â€º GET /api/auth/user â€º should return 404 when user not found\n\n    expected 404 \"Not Found\", got 500 \"Internal Server Error\"\n\n      81 |       const response = await request(app)\n      82 |         .get('/api/auth/user')\n    > 83 |         .expect(404);\n         |          ^\n      84 |\n      85 |       expect(response.body).toEqual({\n      86 |         success: false,\n\n      at Object.<anonymous> (server/__tests__/routes/auth.test.ts:83:10)\n      ----\n      at Test._assertStatus (node_modules/supertest/lib/test.js:309:14)\n      at node_modules/supertest/lib/test.js:365:13\n      at Test._assertFunction (node_modules/supertest/lib/test.js:342:13)\n      at Test.assert (node_modules/supertest/lib/test.js:195:23)\n      at localAssert (node_modules/supertest/lib/test.js:138:14)\n      at Server.<anonymous> (node_modules/supertest/lib/test.js:152:11)\n\n  â— Auth Routes â€º POST /api/auth/auto-register â€º should create new user when email does not exist\n\n    expected 201 \"Created\", got 500 \"Internal Server Error\"\n\n      114 |         .post('/api/auth/auto-register')\n      115 |         .send({ email: 'new@example.com', name: 'New User' })\n    > 116 |         .expect(201);\n          |          ^\n      117 |\n      118 |       expect(response.body).toEqual({\n      119 |         success: true,\n\n      at Object.<anonymous> (server/__tests__/routes/auth.test.ts:116:10)\n      ----\n      at Test._assertStatus (node_modules/supertest/lib/test.js:309:14)\n      at node_modules/supertest/lib/test.js:365:13\n      at Test._assertFunction (node_modules/supertest/lib/test.js:342:13)\n      at Test.assert (node_modules/supertest/lib/test.js:195:23)\n      at localAssert (node_modules/supertest/lib/test.js:138:14)\n      at Server.<anonymous> (node_modules/supertest/lib/test.js:152:11)\n\n  â— Auth Routes â€º POST /api/auth/auto-register â€º should return existing user when email already exists\n\n    expected 200 \"OK\", got 500 \"Internal Server Error\"\n\n      138 |         .post('/api/auth/auto-register')\n      139 |         .send({ email: 'existing@example.com', name: 'Existing User' })\n    > 140 |         .expect(200);\n          |          ^\n      141 |\n      142 |       expect(response.body).toEqual({\n      143 |         success: true,\n\n      at Object.<anonymous> (server/__tests__/routes/auth.test.ts:140:10)\n      ----\n      at Test._assertStatus (node_modules/supertest/lib/test.js:309:14)\n      at node_modules/supertest/lib/test.js:365:13\n      at Test._assertFunction (node_modules/supertest/lib/test.js:342:13)\n      at Test.assert (node_modules/supertest/lib/test.js:195:23)\n      at localAssert (node_modules/supertest/lib/test.js:138:14)\n      at Server.<anonymous> (node_modules/supertest/lib/test.js:152:11)\n\n  â— Auth Routes â€º POST /api/auth/auto-register â€º should return 400 when email is missing\n\n    expected 400 \"Bad Request\", got 500 \"Internal Server Error\"\n\n      154 |         .post('/api/auth/auto-register')\n      155 |         .send({ name: 'Test User' })\n    > 156 |         .expect(400);\n          |          ^\n      157 |\n      158 |       expect(response.body).toEqual({\n      159 |         success: false,\n\n      at Object.<anonymous> (server/__tests__/routes/auth.test.ts:156:10)\n      ----\n      at Test._assertStatus (node_modules/supertest/lib/test.js:309:14)\n      at node_modules/supertest/lib/test.js:365:13\n      at Test._assertFunction (node_modules/supertest/lib/test.js:342:13)\n      at Test.assert (node_modules/supertest/lib/test.js:195:23)\n      at localAssert (node_modules/supertest/lib/test.js:138:14)\n      at Server.<anonymous> (node_modules/supertest/lib/test.js:152:11)\n\n  â— Auth Routes â€º POST /api/user/update-gender â€º should update user gender successfully\n\n    expected 200 \"OK\", got 500 \"Internal Server Error\"\n\n      174 |         .post('/api/user/update-gender')\n      175 |         .send({ gender: 'woman' })\n    > 176 |         .expect(200);\n          |          ^\n      177 |\n      178 |       expect(mockStorage.updateUserProfile).toHaveBeenCalledWith('test-user-123', {\n      179 |         gender: 'woman',\n\n      at Object.<anonymous> (server/__tests__/routes/auth.test.ts:176:10)\n      ----\n      at Test._assertStatus (node_modules/supertest/lib/test.js:309:14)\n      at node_modules/supertest/lib/test.js:365:13\n      at Test._assertFunction (node_modules/supertest/lib/test.js:342:13)\n      at Test.assert (node_modules/supertest/lib/test.js:195:23)\n      at localAssert (node_modules/supertest/lib/test.js:138:14)\n      at Server.<anonymous> (node_modules/supertest/lib/test.js:152:11)\n\n  â— Auth Routes â€º POST /api/user/update-gender â€º should return 400 for invalid gender value\n\n    expected 400 \"Bad Request\", got 500 \"Internal Server Error\"\n\n      194 |         .post('/api/user/update-gender')\n      195 |         .send({ gender: 'invalid' })\n    > 196 |         .expect(400);\n          |          ^\n      197 |\n      198 |       expect(response.body).toEqual({\n      199 |         success: false,\n\n      at Object.<anonymous> (server/__tests__/routes/auth.test.ts:196:10)\n      ----\n      at Test._assertStatus (node_modules/supertest/lib/test.js:309:14)\n      at node_modules/supertest/lib/test.js:365:13\n      at Test._assertFunction (node_modules/supertest/lib/test.js:342:13)\n      at Test.assert (node_modules/supertest/lib/test.js:195:23)\n      at localAssert (node_modules/supertest/lib/test.js:138:14)\n      at Server.<anonymous> (node_modules/supertest/lib/test.js:152:11)\n\n  â— Auth Routes â€º POST /api/user/update-gender â€º should return 400 when gender is missing\n\n    expected 400 \"Bad Request\", got 500 \"Internal Server Error\"\n\n      210 |         .post('/api/user/update-gender')\n      211 |         .send({})\n    > 212 |         .expect(400);\n          |          ^\n      213 |\n      214 |       expect(response.body).toEqual({\n      215 |         success: false,\n\n      at Object.<anonymous> (server/__tests__/routes/auth.test.ts:212:10)\n      ----\n      at Test._assertStatus (node_modules/supertest/lib/test.js:309:14)\n      at node_modules/supertest/lib/test.js:365:13\n      at Test._assertFunction (node_modules/supertest/lib/test.js:342:13)\n      at Test.assert (node_modules/supertest/lib/test.js:195:23)\n      at localAssert (node_modules/supertest/lib/test.js:138:14)\n      at Server.<anonymous> (node_modules/supertest/lib/test.js:152:11)\n\nFAIL server/__tests__/routes/gallery.test.ts\n  â— Console\n\n    console.log\n      ğŸ§ª Phase 6 Testing Framework initialized\n\n      at Object.<anonymous> (jest.setup.js:31:11)\n\n    console.error\n      ğŸš¨ Route Error: {\n        message: \"Cannot read properties of undefined (reading 'filter')\",\n        statusCode: 500,\n        code: 'UNKNOWN_ERROR',\n        stack: \"TypeError: Cannot read properties of undefined (reading 'filter')\\n\" +\n          '    at validateRequired (/Users/MD760HA/SSELFIE-BRAND-STUDIO/server/routes/middleware/error-handler.ts:143:26)\\n' +\n          '    at /Users/MD760HA/SSELFIE-BRAND-STUDIO/server/routes/modules/gallery.ts:24:19\\n' +\n          '    at /Users/MD760HA/SSELFIE-BRAND-STUDIO/server/routes/middleware/error-handler.ts:70:21\\n' +\n          '    at Layer.handle [as handle_request] (/Users/MD760HA/SSELFIE-BRAND-STUDIO/node_modules/express/lib/router/layer.js:95:5)\\n' +\n          '    at next (/Users/MD760HA/SSELFIE-BRAND-STUDIO/node_modules/express/lib/router/route.js:149:13)\\n' +\n          '    at requireStackAuth (/Users/MD760HA/SSELFIE-BRAND-STUDIO/server/__tests__/routes/gallery.test.ts:15:5)\\n' +\n          '    at Layer.handle [as handle_request] (/Users/MD760HA/SSELFIE-BRAND-STUDIO/node_modules/express/lib/router/layer.js:95:5)\\n' +\n          '    at next (/Users/MD760HA/SSELFIE-BRAND-STUDIO/node_modules/express/lib/router/route.js:149:13)\\n' +\n          '    at Route.dispatch (/Users/MD760HA/SSELFIE-BRAND-STUDIO/node_modules/express/lib/router/route.js:119:3)\\n' +\n          '    at Layer.handle [as handle_request] (/Users/MD760HA/SSELFIE-BRAND-STUDIO/node_modules/express/lib/router/layer.js:95:5)\\n' +\n          '    at /Users/MD760HA/SSELFIE-BRAND-STUDIO/node_modules/express/lib/router/index.js:284:15\\n' +\n          '    at Function.process_params (/Users/MD760HA/SSELFIE-BRAND-STUDIO/node_modules/express/lib/router/index.js:346:12)\\n' +\n          '    at next (/Users/MD760HA/SSELFIE-BRAND-STUDIO/node_modules/express/lib/router/index.js:280:10)\\n' +\n          '    at Function.handle (/Users/MD760HA/SSELFIE-BRAND-STUDIO/node_modules/express/lib/router/index.js:175:3)\\n' +\n          '    at router (/Users/MD760HA/SSELFIE-BRAND-STUDIO/node_modules/express/lib/router/index.js:47:12)\\n' +\n          '    at Layer.handle [as handle_request] (/Users/MD760HA/SSELFIE-BRAND-STUDIO/node_modules/express/lib/router/layer.js:95:5)\\n' +\n          '    at trim_prefix (/Users/MD760HA/SSELFIE-BRAND-STUDIO/node_modules/express/lib/router/index.js:328:13)\\n' +\n          '    at /Users/MD760HA/SSELFIE-BRAND-STUDIO/node_modules/express/lib/router/index.js:286:9\\n' +\n          '    at Function.process_params (/Users/MD760HA/SSELFIE-BRAND-STUDIO/node_modules/express/lib/router/index.js:346:12)\\n' +\n          '    at next (/Users/MD760HA/SSELFIE-BRAND-STUDIO/node_modules/express/lib/router/index.js:280:10)\\n' +\n          '    at /Users/MD760HA/SSELFIE-BRAND-STUDIO/node_modules/body-parser/lib/read.js:137:5\\n' +\n          '    at AsyncResource.runInAsyncScope (node:async_hooks:214:14)\\n' +\n          '    at invokeCallback (/Users/MD760HA/SSELFIE-BRAND-STUDIO/node_modules/raw-body/index.js:238:16)\\n' +\n          '    at done (/Users/MD760HA/SSELFIE-BRAND-STUDIO/node_modules/raw-body/index.js:227:7)\\n' +\n          '    at IncomingMessage.onEnd (/Users/MD760HA/SSELFIE-BRAND-STUDIO/node_modules/raw-body/index.js:287:7)\\n' +\n          '    at IncomingMessage.emit (node:events:518:28)\\n' +\n          '    at endReadableNT (node:internal/streams/readable:1698:12)\\n' +\n          '    at processTicksAndRejections (node:internal/process/task_queues:90:21)',\n        url: '/api/gallery/upload',\n        method: 'POST',\n        timestamp: '2025-09-15T18:45:00.547Z'\n      }\n\n      80 | ) => {\n      81 |   // Log error details\n    > 82 |   console.error('ğŸš¨ Route Error:', {\n         |           ^\n      83 |     message: error.message,\n      84 |     statusCode: error.statusCode || 500,\n      85 |     code: error.code || 'UNKNOWN_ERROR',\n\n      at errorHandler (server/routes/middleware/error-handler.ts:82:11)\n      at Layer.handle_error (node_modules/express/lib/router/layer.js:71:5)\n      at trim_prefix (node_modules/express/lib/router/index.js:326:13)\n      at node_modules/express/lib/router/index.js:286:9\n      at Function.process_params (node_modules/express/lib/router/index.js:346:12)\n      at next (node_modules/express/lib/router/index.js:280:10)\n      at node_modules/express/lib/router/index.js:646:15\n      at next (node_modules/express/lib/router/index.js:265:14)\n      at next (node_modules/express/lib/router/route.js:141:14)\n\n    console.log\n      ğŸ§ª Phase 6 Testing Framework completed\n\n      at Object.<anonymous> (jest.setup.js:35:11)\n\n  â— Gallery Routes â€º GET /api/gallery â€º should get user gallery images\n\n    expect(received).toEqual(expected) // deep equality\n\n    - Expected  - 1\n    + Received  + 2\n\n      Object {\n        \"data\": Object {\n    -     \"message\": \"Gallery endpoint (placeholder)\",\n    +     \"count\": 0,\n    +     \"gallery\": Array [],\n        },\n        \"success\": true,\n        \"timestamp\": Any<String>,\n      }\n\n      34 |         .expect(200);\n      35 |\n    > 36 |       expect(response.body).toEqual({\n         |                             ^\n      37 |         success: true,\n      38 |         data: {\n      39 |           message: 'Gallery endpoint (placeholder)'\n\n      at Object.<anonymous> (server/__tests__/routes/gallery.test.ts:36:29)\n\n  â— Gallery Routes â€º POST /api/gallery/upload â€º should upload image to gallery\n\n    expected 200 \"OK\", got 500 \"Internal Server Error\"\n\n      49 |         .post('/api/gallery/upload')\n      50 |         .send({ imageUrl: 'https://example.com/image.jpg' })\n    > 51 |         .expect(200);\n         |          ^\n      52 |\n      53 |       expect(response.body).toEqual({\n      54 |         success: true,\n\n      at Object.<anonymous> (server/__tests__/routes/gallery.test.ts:51:10)\n      ----\n      at Test._assertStatus (node_modules/supertest/lib/test.js:309:14)\n      at node_modules/supertest/lib/test.js:365:13\n      at Test._assertFunction (node_modules/supertest/lib/test.js:342:13)\n      at Test.assert (node_modules/supertest/lib/test.js:195:23)\n      at localAssert (node_modules/supertest/lib/test.js:138:14)\n      at Server.<anonymous> (node_modules/supertest/lib/test.js:152:11)\n\n  â— Gallery Routes â€º DELETE /api/gallery/:imageId â€º should delete image from gallery\n\n    expected 200 \"OK\", got 404 \"Not Found\"\n\n      65 |       const response = await request(app)\n      66 |         .delete('/api/gallery/image123')\n    > 67 |         .expect(200);\n         |          ^\n      68 |\n      69 |       expect(response.body).toEqual({\n      70 |         success: true,\n\n      at Object.<anonymous> (server/__tests__/routes/gallery.test.ts:67:10)\n      ----\n      at Test._assertStatus (node_modules/supertest/lib/test.js:309:14)\n      at node_modules/supertest/lib/test.js:365:13\n      at Test._assertFunction (node_modules/supertest/lib/test.js:342:13)\n      at Test.assert (node_modules/supertest/lib/test.js:195:23)\n      at localAssert (node_modules/supertest/lib/test.js:138:14)\n      at Server.<anonymous> (node_modules/supertest/lib/test.js:152:11)\n\n  â— Gallery Routes â€º GET /api/gallery/:imageId â€º should get specific gallery image\n\n    expected 200 \"OK\", got 404 \"Not Found\"\n\n      82 |       const response = await request(app)\n      83 |         .get('/api/gallery/image123')\n    > 84 |         .expect(200);\n         |          ^\n      85 |\n      86 |       expect(response.body).toEqual({\n      87 |         success: true,\n\n      at Object.<anonymous> (server/__tests__/routes/gallery.test.ts:84:10)\n      ----\n      at Test._assertStatus (node_modules/supertest/lib/test.js:309:14)\n      at node_modules/supertest/lib/test.js:365:13\n      at Test._assertFunction (node_modules/supertest/lib/test.js:342:13)\n      at Test.assert (node_modules/supertest/lib/test.js:195:23)\n      at localAssert (node_modules/supertest/lib/test.js:138:14)\n      at Server.<anonymous> (node_modules/supertest/lib/test.js:152:11)\n\nFAIL server/__tests__/maya-validation.test.ts\n  â— Console\n\n    console.log\n      ğŸ§ª STEP 5.3: Maya validation and monitoring tests configured\n\n      at Object.<anonymous> (server/__tests__/maya-validation.test.ts:286:9)\n\n    console.log\n      ğŸ“‹ Validation coverage: Parameter conflicts, Intelligence preservation, Performance targets, TypeScript errors, UX improvements, System integration\n\n      at Object.<anonymous> (server/__tests__/maya-validation.test.ts:287:9)\n\n    console.log\n      ğŸ† Success criteria: 0 conflicts, 100% intelligence preservation, all performance targets met, comprehensive UX improvements\n\n      at Object.<anonymous> (server/__tests__/maya-validation.test.ts:288:9)\n\n    console.log\n      ğŸ§ª Phase 6 Testing Framework initialized\n\n      at Object.<anonymous> (jest.setup.js:31:11)\n\n    console.log\n      ğŸ”§ STEP 5.3: Validating parameter architecture\n\n      at Object.<anonymous> (server/__tests__/maya-validation.test.ts:29:15)\n\n    console.log\n      âœ… Parameter conflicts: 0 (target: 0)\n\n      at Object.<anonymous> (server/__tests__/maya-validation.test.ts:50:15)\n\n    console.log\n      ğŸ§  STEP 5.3: Validating Maya intelligence preservation\n\n      at Object.<anonymous> (server/__tests__/maya-validation.test.ts:55:15)\n\n    console.log\n      ğŸ¯ Maya intelligence preservation: 100% (target: 100%)\n\n      at Object.<anonymous> (server/__tests__/maya-validation.test.ts:97:15)\n\n    console.log\n      âš¡ STEP 5.3: Validating performance targets\n\n      at Object.<anonymous> (server/__tests__/maya-validation.test.ts:102:15)\n\n    console.log\n        ğŸ“Š chatResponseTime: 2800 (target: â‰¤5000) âœ…\n\n      at server/__tests__/maya-validation.test.ts:114:17\n          at Array.every (<anonymous>)\n\n    console.log\n        ğŸ“Š imageGenerationSuccessRate: 98 (target: â‰¤95) âŒ\n\n      at server/__tests__/maya-validation.test.ts:114:17\n          at Array.every (<anonymous>)\n\n    console.log\n      ğŸ“ STEP 5.3: Validating TypeScript compilation\n\n      at Object.<anonymous> (server/__tests__/maya-validation.test.ts:125:15)\n\n    console.log\n      ğŸ“‹ TypeScript errors found: 2 total, 0 critical\n\n      at Object.<anonymous> (server/__tests__/maya-validation.test.ts:139:15)\n\n    console.log\n      âœ… No critical TypeScript compilation errors\n\n      at Object.<anonymous> (server/__tests__/maya-validation.test.ts:143:15)\n\n    console.log\n      ğŸ‘¤ STEP 5.3: Validating user experience improvements\n\n      at Object.<anonymous> (server/__tests__/maya-validation.test.ts:147:15)\n\n    console.log\n      ğŸš€ User experience improvements: 9/9 (100%)\n\n      at Object.<anonymous> (server/__tests__/maya-validation.test.ts:176:15)\n\n    console.log\n      ğŸ”— STEP 5.3: Validating complete system integration\n\n      at Object.<anonymous> (server/__tests__/maya-validation.test.ts:183:15)\n\n    console.log\n      ğŸ“‹ Integration status:\n\n      at Object.<anonymous> (server/__tests__/maya-validation.test.ts:196:15)\n\n    console.log\n        âœ… phase1ParameterFixes\n\n      at server/__tests__/maya-validation.test.ts:198:17\n          at Array.forEach (<anonymous>)\n\n    console.log\n        âœ… phase2PromptOptimization\n\n      at server/__tests__/maya-validation.test.ts:198:17\n          at Array.forEach (<anonymous>)\n\n    console.log\n        âœ… phase3DatabasePerformance\n\n      at server/__tests__/maya-validation.test.ts:198:17\n          at Array.forEach (<anonymous>)\n\n    console.log\n        âœ… phase4FrontendOptimization\n\n      at server/__tests__/maya-validation.test.ts:198:17\n          at Array.forEach (<anonymous>)\n\n    console.log\n        âœ… phase5TestingValidation\n\n      at server/__tests__/maya-validation.test.ts:198:17\n          at Array.forEach (<anonymous>)\n\n    console.log\n      ğŸ‰ All optimization phases integrated successfully\n\n      at Object.<anonymous> (server/__tests__/maya-validation.test.ts:202:15)\n\n    console.log\n      ğŸ’¾ STEP 5.3: Validating data consistency\n\n      at Object.<anonymous> (server/__tests__/maya-validation.test.ts:206:15)\n\n    console.log\n      ğŸ” Data consistency validation:\n\n      at Object.<anonymous> (server/__tests__/maya-validation.test.ts:219:15)\n\n    console.log\n        âœ… cacheKeyGeneration\n\n      at server/__tests__/maya-validation.test.ts:221:17\n          at Array.forEach (<anonymous>)\n\n    console.log\n        âœ… databaseTransactionIntegrity\n\n      at server/__tests__/maya-validation.test.ts:221:17\n          at Array.forEach (<anonymous>)\n\n    console.log\n        âœ… apiResponseStructure\n\n      at server/__tests__/maya-validation.test.ts:221:17\n          at Array.forEach (<anonymous>)\n\n    console.log\n        âœ… conceptCardPreservation\n\n      at server/__tests__/maya-validation.test.ts:221:17\n          at Array.forEach (<anonymous>)\n\n    console.log\n        âœ… userSessionMaintenance\n\n      at server/__tests__/maya-validation.test.ts:221:17\n          at Array.forEach (<anonymous>)\n\n    console.log\n      ğŸ’ Data consistency maintained across all optimizations\n\n      at Object.<anonymous> (server/__tests__/maya-validation.test.ts:225:15)\n\n    console.log\n      ğŸ“Š STEP 5.3: Generating final system health report\n\n      at Object.<anonymous> (server/__tests__/maya-validation.test.ts:231:15)\n\n    console.log\n      ğŸ¥ MAYA SYSTEM HEALTH REPORT\n\n      at Object.<anonymous> (server/__tests__/maya-validation.test.ts:253:15)\n\n    console.log\n      =====================================\n\n      at Object.<anonymous> (server/__tests__/maya-validation.test.ts:254:15)\n\n    console.log\n      Status: HEALTHY\n\n      at Object.<anonymous> (server/__tests__/maya-validation.test.ts:255:15)\n\n    console.log\n      Version: Phase 5 - Complete Optimization\n\n      at Object.<anonymous> (server/__tests__/maya-validation.test.ts:256:15)\n\n    console.log\n\n\n      at Object.<anonymous> (server/__tests__/maya-validation.test.ts:257:15)\n\n    console.log\n      Key Metrics:\n\n      at Object.<anonymous> (server/__tests__/maya-validation.test.ts:258:15)\n\n    console.log\n        Parameter Conflicts: 0\n\n      at Object.<anonymous> (server/__tests__/maya-validation.test.ts:259:15)\n\n    console.log\n        Maya Intelligence: 100%\n\n      at Object.<anonymous> (server/__tests__/maya-validation.test.ts:260:15)\n\n    console.log\n        Performance Targets: NOT MET\n\n      at Object.<anonymous> (server/__tests__/maya-validation.test.ts:261:15)\n\n    console.log\n        All Tests: PASSING\n\n      at Object.<anonymous> (server/__tests__/maya-validation.test.ts:262:15)\n\n    console.log\n        UX Improved: YES\n\n      at Object.<anonymous> (server/__tests__/maya-validation.test.ts:263:15)\n\n    console.log\n\n\n      at Object.<anonymous> (server/__tests__/maya-validation.test.ts:264:15)\n\n    console.log\n      Optimization Status:\n\n      at Object.<anonymous> (server/__tests__/maya-validation.test.ts:265:15)\n\n    console.log\n        phase1: Parameter conflicts resolved âœ…\n\n      at server/__tests__/maya-validation.test.ts:267:17\n          at Array.forEach (<anonymous>)\n\n    console.log\n        phase2: Prompt processing optimized with caching âœ…\n\n      at server/__tests__/maya-validation.test.ts:267:17\n          at Array.forEach (<anonymous>)\n\n    console.log\n        phase3: Database performance enhanced with indexes âœ…\n\n      at server/__tests__/maya-validation.test.ts:267:17\n          at Array.forEach (<anonymous>)\n\n    console.log\n        phase4: Frontend optimized with React best practices âœ…\n\n      at server/__tests__/maya-validation.test.ts:267:17\n          at Array.forEach (<anonymous>)\n\n    console.log\n        phase5: Testing and validation complete âœ…\n\n      at server/__tests__/maya-validation.test.ts:267:17\n          at Array.forEach (<anonymous>)\n\n    console.log\n      ğŸ§ª Phase 6 Testing Framework completed\n\n      at Object.<anonymous> (jest.setup.js:35:11)\n\n  â— Maya System Validation â€º STEP 5.3: Validation Checklist â€º should meet all performance targets\n\n    expect(received).toBe(expected) // Object.is equality\n\n    Expected: true\n    Received: false\n\n      118 |       systemMetrics.performanceTargetsMet = targetsMet;\n      119 |       \n    > 120 |       expect(targetsMet).toBe(true);\n          |                          ^\n      121 |       console.log(`ğŸ† All performance targets met: ${targetsMet}`);\n      122 |     });\n      123 |\n\n      at Object.<anonymous> (server/__tests__/maya-validation.test.ts:120:26)\n\n  â— Maya System Validation â€º STEP 5.3: Final System Health Report â€º should generate comprehensive system health report\n\n    expect(received).toBe(expected) // Object.is equality\n\n    Expected: true\n    Received: false\n\n      276 |                            systemHealthReport.metrics.userExperienceImproved;\n      277 |\n    > 278 |       expect(systemHealthy).toBe(true);\n          |                             ^\n      279 |       console.log('');\n      280 |       console.log('ğŸ‰ MAYA SYSTEM VALIDATION COMPLETE - ALL SYSTEMS GREEN!');\n      281 |       console.log('=====================================');\n\n      at Object.<anonymous> (server/__tests__/maya-validation.test.ts:278:29)\n\nPASS server/__tests__/routes/ai-generation.test.ts\n  â— Console\n\n    console.log\n      ğŸ§ª Phase 6 Testing Framework initialized\n\n      at Object.<anonymous> (jest.setup.js:31:11)\n\n    console.error\n      ğŸš¨ Route Error: {\n        message: 'Concept is required',\n        statusCode: 400,\n        code: 'VALIDATION_ERROR',\n        stack: 'RouteError: Concept is required\\n' +\n          '    at Object.validation (/Users/MD760HA/SSELFIE-BRAND-STUDIO/server/routes/middleware/error-handler.ts:43:5)\\n' +\n          '    at /Users/MD760HA/SSELFIE-BRAND-STUDIO/server/routes/modules/ai-generation.ts:19:23\\n' +\n          '    at /Users/MD760HA/SSELFIE-BRAND-STUDIO/server/routes/middleware/error-handler.ts:70:21\\n' +\n          '    at Layer.handle [as handle_request] (/Users/MD760HA/SSELFIE-BRAND-STUDIO/node_modules/express/lib/router/layer.js:95:5)\\n' +\n          '    at next (/Users/MD760HA/SSELFIE-BRAND-STUDIO/node_modules/express/lib/router/route.js:149:13)\\n' +\n          '    at requireStackAuth (/Users/MD760HA/SSELFIE-BRAND-STUDIO/server/__tests__/routes/ai-generation.test.ts:24:5)\\n' +\n          '    at Layer.handle [as handle_request] (/Users/MD760HA/SSELFIE-BRAND-STUDIO/node_modules/express/lib/router/layer.js:95:5)\\n' +\n          '    at next (/Users/MD760HA/SSELFIE-BRAND-STUDIO/node_modules/express/lib/router/route.js:149:13)\\n' +\n          '    at Route.dispatch (/Users/MD760HA/SSELFIE-BRAND-STUDIO/node_modules/express/lib/router/route.js:119:3)\\n' +\n          '    at Layer.handle [as handle_request] (/Users/MD760HA/SSELFIE-BRAND-STUDIO/node_modules/express/lib/router/layer.js:95:5)\\n' +\n          '    at /Users/MD760HA/SSELFIE-BRAND-STUDIO/node_modules/express/lib/router/index.js:284:15\\n' +\n          '    at Function.process_params (/Users/MD760HA/SSELFIE-BRAND-STUDIO/node_modules/express/lib/router/index.js:346:12)\\n' +\n          '    at next (/Users/MD760HA/SSELFIE-BRAND-STUDIO/node_modules/express/lib/router/index.js:280:10)\\n' +\n          '    at Function.handle (/Users/MD760HA/SSELFIE-BRAND-STUDIO/node_modules/express/lib/router/index.js:175:3)\\n' +\n          '    at router (/Users/MD760HA/SSELFIE-BRAND-STUDIO/node_modules/express/lib/router/index.js:47:12)\\n' +\n          '    at Layer.handle [as handle_request] (/Users/MD760HA/SSELFIE-BRAND-STUDIO/node_modules/express/lib/router/layer.js:95:5)\\n' +\n          '    at trim_prefix (/Users/MD760HA/SSELFIE-BRAND-STUDIO/node_modules/express/lib/router/index.js:328:13)\\n' +\n          '    at /Users/MD760HA/SSELFIE-BRAND-STUDIO/node_modules/express/lib/router/index.js:286:9\\n' +\n          '    at Function.process_params (/Users/MD760HA/SSELFIE-BRAND-STUDIO/node_modules/express/lib/router/index.js:346:12)\\n' +\n          '    at next (/Users/MD760HA/SSELFIE-BRAND-STUDIO/node_modules/express/lib/router/index.js:280:10)\\n' +\n          '    at /Users/MD760HA/SSELFIE-BRAND-STUDIO/node_modules/body-parser/lib/read.js:137:5\\n' +\n          '    at AsyncResource.runInAsyncScope (node:async_hooks:214:14)\\n' +\n          '    at invokeCallback (/Users/MD760HA/SSELFIE-BRAND-STUDIO/node_modules/raw-body/index.js:238:16)\\n' +\n          '    at done (/Users/MD760HA/SSELFIE-BRAND-STUDIO/node_modules/raw-body/index.js:227:7)\\n' +\n          '    at IncomingMessage.onEnd (/Users/MD760HA/SSELFIE-BRAND-STUDIO/node_modules/raw-body/index.js:287:7)\\n' +\n          '    at IncomingMessage.emit (node:events:518:28)\\n' +\n          '    at endReadableNT (node:internal/streams/readable:1698:12)\\n' +\n          '    at processTicksAndRejections (node:internal/process/task_queues:90:21)',\n        url: '/api/story/draft',\n        method: 'POST',\n        timestamp: '2025-09-15T18:45:00.773Z'\n      }\n\n      80 | ) => {\n      81 |   // Log error details\n    > 82 |   console.error('ğŸš¨ Route Error:', {\n         |           ^\n      83 |     message: error.message,\n      84 |     statusCode: error.statusCode || 500,\n      85 |     code: error.code || 'UNKNOWN_ERROR',\n\n      at errorHandler (server/routes/middleware/error-handler.ts:82:11)\n      at Layer.handle_error (node_modules/express/lib/router/layer.js:71:5)\n      at trim_prefix (node_modules/express/lib/router/index.js:326:13)\n      at node_modules/express/lib/router/index.js:286:9\n      at Function.process_params (node_modules/express/lib/router/index.js:346:12)\n      at next (node_modules/express/lib/router/index.js:280:10)\n      at node_modules/express/lib/router/index.js:646:15\n      at next (node_modules/express/lib/router/index.js:265:14)\n      at next (node_modules/express/lib/router/route.js:141:14)\n\n    console.error\n      ğŸš¨ Route Error: {\n        message: 'Concept is required',\n        statusCode: 400,\n        code: 'VALIDATION_ERROR',\n        stack: 'RouteError: Concept is required\\n' +\n          '    at Object.validation (/Users/MD760HA/SSELFIE-BRAND-STUDIO/server/routes/middleware/error-handler.ts:43:5)\\n' +\n          '    at /Users/MD760HA/SSELFIE-BRAND-STUDIO/server/routes/modules/ai-generation.ts:35:23\\n' +\n          '    at /Users/MD760HA/SSELFIE-BRAND-STUDIO/server/routes/middleware/error-handler.ts:70:21\\n' +\n          '    at Layer.handle [as handle_request] (/Users/MD760HA/SSELFIE-BRAND-STUDIO/node_modules/express/lib/router/layer.js:95:5)\\n' +\n          '    at next (/Users/MD760HA/SSELFIE-BRAND-STUDIO/node_modules/express/lib/router/route.js:149:13)\\n' +\n          '    at requireStackAuth (/Users/MD760HA/SSELFIE-BRAND-STUDIO/server/__tests__/routes/ai-generation.test.ts:24:5)\\n' +\n          '    at Layer.handle [as handle_request] (/Users/MD760HA/SSELFIE-BRAND-STUDIO/node_modules/express/lib/router/layer.js:95:5)\\n' +\n          '    at next (/Users/MD760HA/SSELFIE-BRAND-STUDIO/node_modules/express/lib/router/route.js:149:13)\\n' +\n          '    at Route.dispatch (/Users/MD760HA/SSELFIE-BRAND-STUDIO/node_modules/express/lib/router/route.js:119:3)\\n' +\n          '    at Layer.handle [as handle_request] (/Users/MD760HA/SSELFIE-BRAND-STUDIO/node_modules/express/lib/router/layer.js:95:5)\\n' +\n          '    at /Users/MD760HA/SSELFIE-BRAND-STUDIO/node_modules/express/lib/router/index.js:284:15\\n' +\n          '    at Function.process_params (/Users/MD760HA/SSELFIE-BRAND-STUDIO/node_modules/express/lib/router/index.js:346:12)\\n' +\n          '    at next (/Users/MD760HA/SSELFIE-BRAND-STUDIO/node_modules/express/lib/router/index.js:280:10)\\n' +\n          '    at Function.handle (/Users/MD760HA/SSELFIE-BRAND-STUDIO/node_modules/express/lib/router/index.js:175:3)\\n' +\n          '    at router (/Users/MD760HA/SSELFIE-BRAND-STUDIO/node_modules/express/lib/router/index.js:47:12)\\n' +\n          '    at Layer.handle [as handle_request] (/Users/MD760HA/SSELFIE-BRAND-STUDIO/node_modules/express/lib/router/layer.js:95:5)\\n' +\n          '    at trim_prefix (/Users/MD760HA/SSELFIE-BRAND-STUDIO/node_modules/express/lib/router/index.js:328:13)\\n' +\n          '    at /Users/MD760HA/SSELFIE-BRAND-STUDIO/node_modules/express/lib/router/index.js:286:9\\n' +\n          '    at Function.process_params (/Users/MD760HA/SSELFIE-BRAND-STUDIO/node_modules/express/lib/router/index.js:346:12)\\n' +\n          '    at next (/Users/MD760HA/SSELFIE-BRAND-STUDIO/node_modules/express/lib/router/index.js:280:10)\\n' +\n          '    at /Users/MD760HA/SSELFIE-BRAND-STUDIO/node_modules/body-parser/lib/read.js:137:5\\n' +\n          '    at AsyncResource.runInAsyncScope (node:async_hooks:214:14)\\n' +\n          '    at invokeCallback (/Users/MD760HA/SSELFIE-BRAND-STUDIO/node_modules/raw-body/index.js:238:16)\\n' +\n          '    at done (/Users/MD760HA/SSELFIE-BRAND-STUDIO/node_modules/raw-body/index.js:227:7)\\n' +\n          '    at IncomingMessage.onEnd (/Users/MD760HA/SSELFIE-BRAND-STUDIO/node_modules/raw-body/index.js:287:7)\\n' +\n          '    at IncomingMessage.emit (node:events:518:28)\\n' +\n          '    at endReadableNT (node:internal/streams/readable:1698:12)\\n' +\n          '    at processTicksAndRejections (node:internal/process/task_queues:90:21)',\n        url: '/api/story/generate',\n        method: 'POST',\n        timestamp: '2025-09-15T18:45:00.782Z'\n      }\n\n      80 | ) => {\n      81 |   // Log error details\n    > 82 |   console.error('ğŸš¨ Route Error:', {\n         |           ^\n      83 |     message: error.message,\n      84 |     statusCode: error.statusCode || 500,\n      85 |     code: error.code || 'UNKNOWN_ERROR',\n\n      at errorHandler (server/routes/middleware/error-handler.ts:82:11)\n      at Layer.handle_error (node_modules/express/lib/router/layer.js:71:5)\n      at trim_prefix (node_modules/express/lib/router/index.js:326:13)\n      at node_modules/express/lib/router/index.js:286:9\n      at Function.process_params (node_modules/express/lib/router/index.js:346:12)\n      at next (node_modules/express/lib/router/index.js:280:10)\n      at node_modules/express/lib/router/index.js:646:15\n      at next (node_modules/express/lib/router/index.js:265:14)\n      at next (node_modules/express/lib/router/route.js:141:14)\n\n    console.error\n      ğŸš¨ Route Error: {\n        message: 'Story is required',\n        statusCode: 400,\n        code: 'VALIDATION_ERROR',\n        stack: 'RouteError: Story is required\\n' +\n          '    at Object.validation (/Users/MD760HA/SSELFIE-BRAND-STUDIO/server/routes/middleware/error-handler.ts:43:5)\\n' +\n          '    at /Users/MD760HA/SSELFIE-BRAND-STUDIO/server/routes/modules/ai-generation.ts:67:23\\n' +\n          '    at /Users/MD760HA/SSELFIE-BRAND-STUDIO/server/routes/middleware/error-handler.ts:70:21\\n' +\n          '    at Layer.handle [as handle_request] (/Users/MD760HA/SSELFIE-BRAND-STUDIO/node_modules/express/lib/router/layer.js:95:5)\\n' +\n          '    at next (/Users/MD760HA/SSELFIE-BRAND-STUDIO/node_modules/express/lib/router/route.js:149:13)\\n' +\n          '    at requireActiveSubscription (/Users/MD760HA/SSELFIE-BRAND-STUDIO/server/__tests__/routes/ai-generation.test.ts:28:5)\\n' +\n          '    at Layer.handle [as handle_request] (/Users/MD760HA/SSELFIE-BRAND-STUDIO/node_modules/express/lib/router/layer.js:95:5)\\n' +\n          '    at next (/Users/MD760HA/SSELFIE-BRAND-STUDIO/node_modules/express/lib/router/route.js:149:13)\\n' +\n          '    at Route.dispatch (/Users/MD760HA/SSELFIE-BRAND-STUDIO/node_modules/express/lib/router/route.js:119:3)\\n' +\n          '    at Layer.handle [as handle_request] (/Users/MD760HA/SSELFIE-BRAND-STUDIO/node_modules/express/lib/router/layer.js:95:5)\\n' +\n          '    at /Users/MD760HA/SSELFIE-BRAND-STUDIO/node_modules/express/lib/router/index.js:284:15\\n' +\n          '    at Function.process_params (/Users/MD760HA/SSELFIE-BRAND-STUDIO/node_modules/express/lib/router/index.js:346:12)\\n' +\n          '    at next (/Users/MD760HA/SSELFIE-BRAND-STUDIO/node_modules/express/lib/router/index.js:280:10)\\n' +\n          '    at Function.handle (/Users/MD760HA/SSELFIE-BRAND-STUDIO/node_modules/express/lib/router/index.js:175:3)\\n' +\n          '    at router (/Users/MD760HA/SSELFIE-BRAND-STUDIO/node_modules/express/lib/router/index.js:47:12)\\n' +\n          '    at Layer.handle [as handle_request] (/Users/MD760HA/SSELFIE-BRAND-STUDIO/node_modules/express/lib/router/layer.js:95:5)\\n' +\n          '    at trim_prefix (/Users/MD760HA/SSELFIE-BRAND-STUDIO/node_modules/express/lib/router/index.js:328:13)\\n' +\n          '    at /Users/MD760HA/SSELFIE-BRAND-STUDIO/node_modules/express/lib/router/index.js:286:9\\n' +\n          '    at Function.process_params (/Users/MD760HA/SSELFIE-BRAND-STUDIO/node_modules/express/lib/router/index.js:346:12)\\n' +\n          '    at next (/Users/MD760HA/SSELFIE-BRAND-STUDIO/node_modules/express/lib/router/index.js:280:10)\\n' +\n          '    at /Users/MD760HA/SSELFIE-BRAND-STUDIO/node_modules/body-parser/lib/read.js:137:5\\n' +\n          '    at AsyncResource.runInAsyncScope (node:async_hooks:214:14)\\n' +\n          '    at invokeCallback (/Users/MD760HA/SSELFIE-BRAND-STUDIO/node_modules/raw-body/index.js:238:16)\\n' +\n          '    at done (/Users/MD760HA/SSELFIE-BRAND-STUDIO/node_modules/raw-body/index.js:227:7)\\n' +\n          '    at IncomingMessage.onEnd (/Users/MD760HA/SSELFIE-BRAND-STUDIO/node_modules/raw-body/index.js:287:7)\\n' +\n          '    at IncomingMessage.emit (node:events:518:28)\\n' +\n          '    at endReadableNT (node:internal/streams/readable:1698:12)\\n' +\n          '    at processTicksAndRejections (node:internal/process/task_queues:90:21)',\n        url: '/api/video/generate-story',\n        method: 'POST',\n        timestamp: '2025-09-15T18:45:00.797Z'\n      }\n\n      80 | ) => {\n      81 |   // Log error details\n    > 82 |   console.error('ğŸš¨ Route Error:', {\n         |           ^\n      83 |     message: error.message,\n      84 |     statusCode: error.statusCode || 500,\n      85 |     code: error.code || 'UNKNOWN_ERROR',\n\n      at errorHandler (server/routes/middleware/error-handler.ts:82:11)\n      at Layer.handle_error (node_modules/express/lib/router/layer.js:71:5)\n      at trim_prefix (node_modules/express/lib/router/index.js:326:13)\n      at node_modules/express/lib/router/index.js:286:9\n      at Function.process_params (node_modules/express/lib/router/index.js:346:12)\n      at next (node_modules/express/lib/router/index.js:280:10)\n      at node_modules/express/lib/router/index.js:646:15\n      at next (node_modules/express/lib/router/index.js:265:14)\n      at next (node_modules/express/lib/router/route.js:141:14)\n\n    console.error\n      ğŸš¨ Route Error: {\n        message: 'Prompt is required',\n        statusCode: 400,\n        code: 'VALIDATION_ERROR',\n        stack: 'RouteError: Prompt is required\\n' +\n          '    at Object.validation (/Users/MD760HA/SSELFIE-BRAND-STUDIO/server/routes/middleware/error-handler.ts:43:5)\\n' +\n          '    at /Users/MD760HA/SSELFIE-BRAND-STUDIO/server/routes/modules/ai-generation.ts:85:23\\n' +\n          '    at /Users/MD760HA/SSELFIE-BRAND-STUDIO/server/routes/middleware/error-handler.ts:70:21\\n' +\n          '    at Layer.handle [as handle_request] (/Users/MD760HA/SSELFIE-BRAND-STUDIO/node_modules/express/lib/router/layer.js:95:5)\\n' +\n          '    at next (/Users/MD760HA/SSELFIE-BRAND-STUDIO/node_modules/express/lib/router/route.js:149:13)\\n' +\n          '    at requireActiveSubscription (/Users/MD760HA/SSELFIE-BRAND-STUDIO/server/__tests__/routes/ai-generation.test.ts:28:5)\\n' +\n          '    at Layer.handle [as handle_request] (/Users/MD760HA/SSELFIE-BRAND-STUDIO/node_modules/express/lib/router/layer.js:95:5)\\n' +\n          '    at next (/Users/MD760HA/SSELFIE-BRAND-STUDIO/node_modules/express/lib/router/route.js:149:13)\\n' +\n          '    at Route.dispatch (/Users/MD760HA/SSELFIE-BRAND-STUDIO/node_modules/express/lib/router/route.js:119:3)\\n' +\n          '    at Layer.handle [as handle_request] (/Users/MD760HA/SSELFIE-BRAND-STUDIO/node_modules/express/lib/router/layer.js:95:5)\\n' +\n          '    at /Users/MD760HA/SSELFIE-BRAND-STUDIO/node_modules/express/lib/router/index.js:284:15\\n' +\n          '    at Function.process_params (/Users/MD760HA/SSELFIE-BRAND-STUDIO/node_modules/express/lib/router/index.js:346:12)\\n' +\n          '    at next (/Users/MD760HA/SSELFIE-BRAND-STUDIO/node_modules/express/lib/router/index.js:280:10)\\n' +\n          '    at Function.handle (/Users/MD760HA/SSELFIE-BRAND-STUDIO/node_modules/express/lib/router/index.js:175:3)\\n' +\n          '    at router (/Users/MD760HA/SSELFIE-BRAND-STUDIO/node_modules/express/lib/router/index.js:47:12)\\n' +\n          '    at Layer.handle [as handle_request] (/Users/MD760HA/SSELFIE-BRAND-STUDIO/node_modules/express/lib/router/layer.js:95:5)\\n' +\n          '    at trim_prefix (/Users/MD760HA/SSELFIE-BRAND-STUDIO/node_modules/express/lib/router/index.js:328:13)\\n' +\n          '    at /Users/MD760HA/SSELFIE-BRAND-STUDIO/node_modules/express/lib/router/index.js:286:9\\n' +\n          '    at Function.process_params (/Users/MD760HA/SSELFIE-BRAND-STUDIO/node_modules/express/lib/router/index.js:346:12)\\n' +\n          '    at next (/Users/MD760HA/SSELFIE-BRAND-STUDIO/node_modules/express/lib/router/index.js:280:10)\\n' +\n          '    at /Users/MD760HA/SSELFIE-BRAND-STUDIO/node_modules/body-parser/lib/read.js:137:5\\n' +\n          '    at AsyncResource.runInAsyncScope (node:async_hooks:214:14)\\n' +\n          '    at invokeCallback (/Users/MD760HA/SSELFIE-BRAND-STUDIO/node_modules/raw-body/index.js:238:16)\\n' +\n          '    at done (/Users/MD760HA/SSELFIE-BRAND-STUDIO/node_modules/raw-body/index.js:227:7)\\n' +\n          '    at IncomingMessage.onEnd (/Users/MD760HA/SSELFIE-BRAND-STUDIO/node_modules/raw-body/index.js:287:7)\\n' +\n          '    at IncomingMessage.emit (node:events:518:28)\\n' +\n          '    at endReadableNT (node:internal/streams/readable:1698:12)\\n' +\n          '    at processTicksAndRejections (node:internal/process/task_queues:90:21)',\n        url: '/api/video/generate',\n        method: 'POST',\n        timestamp: '2025-09-15T18:45:00.806Z'\n      }\n\n      80 | ) => {\n      81 |   // Log error details\n    > 82 |   console.error('ğŸš¨ Route Error:', {\n         |           ^\n      83 |     message: error.message,\n      84 |     statusCode: error.statusCode || 500,\n      85 |     code: error.code || 'UNKNOWN_ERROR',\n\n      at errorHandler (server/routes/middleware/error-handler.ts:82:11)\n      at Layer.handle_error (node_modules/express/lib/router/layer.js:71:5)\n      at trim_prefix (node_modules/express/lib/router/index.js:326:13)\n      at node_modules/express/lib/router/index.js:286:9\n      at Function.process_params (node_modules/express/lib/router/index.js:346:12)\n      at next (node_modules/express/lib/router/index.js:280:10)\n      at node_modules/express/lib/router/index.js:646:15\n      at next (node_modules/express/lib/router/index.js:265:14)\n      at next (node_modules/express/lib/router/route.js:141:14)\n\n    console.error\n      ğŸš¨ Route Error: {\n        message: 'Prompt is required',\n        statusCode: 400,\n        code: 'VALIDATION_ERROR',\n        stack: 'RouteError: Prompt is required\\n' +\n          '    at Object.validation (/Users/MD760HA/SSELFIE-BRAND-STUDIO/server/routes/middleware/error-handler.ts:43:5)\\n' +\n          '    at /Users/MD760HA/SSELFIE-BRAND-STUDIO/server/routes/modules/ai-generation.ts:114:23\\n' +\n          '    at /Users/MD760HA/SSELFIE-BRAND-STUDIO/server/routes/middleware/error-handler.ts:70:21\\n' +\n          '    at Layer.handle [as handle_request] (/Users/MD760HA/SSELFIE-BRAND-STUDIO/node_modules/express/lib/router/layer.js:95:5)\\n' +\n          '    at next (/Users/MD760HA/SSELFIE-BRAND-STUDIO/node_modules/express/lib/router/route.js:149:13)\\n' +\n          '    at requireStackAuth (/Users/MD760HA/SSELFIE-BRAND-STUDIO/server/__tests__/routes/ai-generation.test.ts:24:5)\\n' +\n          '    at Layer.handle [as handle_request] (/Users/MD760HA/SSELFIE-BRAND-STUDIO/node_modules/express/lib/router/layer.js:95:5)\\n' +\n          '    at next (/Users/MD760HA/SSELFIE-BRAND-STUDIO/node_modules/express/lib/router/route.js:149:13)\\n' +\n          '    at Route.dispatch (/Users/MD760HA/SSELFIE-BRAND-STUDIO/node_modules/express/lib/router/route.js:119:3)\\n' +\n          '    at Layer.handle [as handle_request] (/Users/MD760HA/SSELFIE-BRAND-STUDIO/node_modules/express/lib/router/layer.js:95:5)\\n' +\n          '    at /Users/MD760HA/SSELFIE-BRAND-STUDIO/node_modules/express/lib/router/index.js:284:15\\n' +\n          '    at Function.process_params (/Users/MD760HA/SSELFIE-BRAND-STUDIO/node_modules/express/lib/router/index.js:346:12)\\n' +\n          '    at next (/Users/MD760HA/SSELFIE-BRAND-STUDIO/node_modules/express/lib/router/index.js:280:10)\\n' +\n          '    at Function.handle (/Users/MD760HA/SSELFIE-BRAND-STUDIO/node_modules/express/lib/router/index.js:175:3)\\n' +\n          '    at router (/Users/MD760HA/SSELFIE-BRAND-STUDIO/node_modules/express/lib/router/index.js:47:12)\\n' +\n          '    at Layer.handle [as handle_request] (/Users/MD760HA/SSELFIE-BRAND-STUDIO/node_modules/express/lib/router/layer.js:95:5)\\n' +\n          '    at trim_prefix (/Users/MD760HA/SSELFIE-BRAND-STUDIO/node_modules/express/lib/router/index.js:328:13)\\n' +\n          '    at /Users/MD760HA/SSELFIE-BRAND-STUDIO/node_modules/express/lib/router/index.js:286:9\\n' +\n          '    at Function.process_params (/Users/MD760HA/SSELFIE-BRAND-STUDIO/node_modules/express/lib/router/index.js:346:12)\\n' +\n          '    at next (/Users/MD760HA/SSELFIE-BRAND-STUDIO/node_modules/express/lib/router/index.js:280:10)\\n' +\n          '    at /Users/MD760HA/SSELFIE-BRAND-STUDIO/node_modules/body-parser/lib/read.js:137:5\\n' +\n          '    at AsyncResource.runInAsyncScope (node:async_hooks:214:14)\\n' +\n          '    at invokeCallback (/Users/MD760HA/SSELFIE-BRAND-STUDIO/node_modules/raw-body/index.js:238:16)\\n' +\n          '    at done (/Users/MD760HA/SSELFIE-BRAND-STUDIO/node_modules/raw-body/index.js:227:7)\\n' +\n          '    at IncomingMessage.onEnd (/Users/MD760HA/SSELFIE-BRAND-STUDIO/node_modules/raw-body/index.js:287:7)\\n' +\n          '    at IncomingMessage.emit (node:events:518:28)\\n' +\n          '    at endReadableNT (node:internal/streams/readable:1698:12)\\n' +\n          '    at processTicksAndRejections (node:internal/process/task_queues:90:21)',\n        url: '/api/victoria/generate',\n        method: 'POST',\n        timestamp: '2025-09-15T18:45:00.819Z'\n      }\n\n      80 | ) => {\n      81 |   // Log error details\n    > 82 |   console.error('ğŸš¨ Route Error:', {\n         |           ^\n      83 |     message: error.message,\n      84 |     statusCode: error.statusCode || 500,\n      85 |     code: error.code || 'UNKNOWN_ERROR',\n\n      at errorHandler (server/routes/middleware/error-handler.ts:82:11)\n      at Layer.handle_error (node_modules/express/lib/router/layer.js:71:5)\n      at trim_prefix (node_modules/express/lib/router/index.js:326:13)\n      at node_modules/express/lib/router/index.js:286:9\n      at Function.process_params (node_modules/express/lib/router/index.js:346:12)\n      at next (node_modules/express/lib/router/index.js:280:10)\n      at node_modules/express/lib/router/index.js:646:15\n      at next (node_modules/express/lib/router/index.js:265:14)\n      at next (node_modules/express/lib/router/route.js:141:14)\n\n    console.error\n      ğŸš¨ Route Error: {\n        message: 'Prompt is required',\n        statusCode: 400,\n        code: 'VALIDATION_ERROR',\n        stack: 'RouteError: Prompt is required\\n' +\n          '    at Object.validation (/Users/MD760HA/SSELFIE-BRAND-STUDIO/server/routes/middleware/error-handler.ts:43:5)\\n' +\n          '    at /Users/MD760HA/SSELFIE-BRAND-STUDIO/server/routes/modules/ai-generation.ts:175:23\\n' +\n          '    at /Users/MD760HA/SSELFIE-BRAND-STUDIO/server/routes/middleware/error-handler.ts:70:21\\n' +\n          '    at Layer.handle [as handle_request] (/Users/MD760HA/SSELFIE-BRAND-STUDIO/node_modules/express/lib/router/layer.js:95:5)\\n' +\n          '    at next (/Users/MD760HA/SSELFIE-BRAND-STUDIO/node_modules/express/lib/router/route.js:149:13)\\n' +\n          '    at requireActiveSubscription (/Users/MD760HA/SSELFIE-BRAND-STUDIO/server/__tests__/routes/ai-generation.test.ts:28:5)\\n' +\n          '    at Layer.handle [as handle_request] (/Users/MD760HA/SSELFIE-BRAND-STUDIO/node_modules/express/lib/router/layer.js:95:5)\\n' +\n          '    at next (/Users/MD760HA/SSELFIE-BRAND-STUDIO/node_modules/express/lib/router/route.js:149:13)\\n' +\n          '    at Route.dispatch (/Users/MD760HA/SSELFIE-BRAND-STUDIO/node_modules/express/lib/router/route.js:119:3)\\n' +\n          '    at Layer.handle [as handle_request] (/Users/MD760HA/SSELFIE-BRAND-STUDIO/node_modules/express/lib/router/layer.js:95:5)\\n' +\n          '    at /Users/MD760HA/SSELFIE-BRAND-STUDIO/node_modules/express/lib/router/index.js:284:15\\n' +\n          '    at Function.process_params (/Users/MD760HA/SSELFIE-BRAND-STUDIO/node_modules/express/lib/router/index.js:346:12)\\n' +\n          '    at next (/Users/MD760HA/SSELFIE-BRAND-STUDIO/node_modules/express/lib/router/index.js:280:10)\\n' +\n          '    at Function.handle (/Users/MD760HA/SSELFIE-BRAND-STUDIO/node_modules/express/lib/router/index.js:175:3)\\n' +\n          '    at router (/Users/MD760HA/SSELFIE-BRAND-STUDIO/node_modules/express/lib/router/index.js:47:12)\\n' +\n          '    at Layer.handle [as handle_request] (/Users/MD760HA/SSELFIE-BRAND-STUDIO/node_modules/express/lib/router/layer.js:95:5)\\n' +\n          '    at trim_prefix (/Users/MD760HA/SSELFIE-BRAND-STUDIO/node_modules/express/lib/router/index.js:328:13)\\n' +\n          '    at /Users/MD760HA/SSELFIE-BRAND-STUDIO/node_modules/express/lib/router/index.js:286:9\\n' +\n          '    at Function.process_params (/Users/MD760HA/SSELFIE-BRAND-STUDIO/node_modules/express/lib/router/index.js:346:12)\\n' +\n          '    at next (/Users/MD760HA/SSELFIE-BRAND-STUDIO/node_modules/express/lib/router/index.js:280:10)\\n' +\n          '    at /Users/MD760HA/SSELFIE-BRAND-STUDIO/node_modules/body-parser/lib/read.js:137:5\\n' +\n          '    at AsyncResource.runInAsyncScope (node:async_hooks:214:14)\\n' +\n          '    at invokeCallback (/Users/MD760HA/SSELFIE-BRAND-STUDIO/node_modules/raw-body/index.js:238:16)\\n' +\n          '    at done (/Users/MD760HA/SSELFIE-BRAND-STUDIO/node_modules/raw-body/index.js:227:7)\\n' +\n          '    at IncomingMessage.onEnd (/Users/MD760HA/SSELFIE-BRAND-STUDIO/node_modules/raw-body/index.js:287:7)\\n' +\n          '    at IncomingMessage.emit (node:events:518:28)\\n' +\n          '    at endReadableNT (node:internal/streams/readable:1698:12)\\n' +\n          '    at processTicksAndRejections (node:internal/process/task_queues:90:21)',\n        url: '/api/ai-images',\n        method: 'POST',\n        timestamp: '2025-09-15T18:45:00.835Z'\n      }\n\n      80 | ) => {\n      81 |   // Log error details\n    > 82 |   console.error('ğŸš¨ Route Error:', {\n         |           ^\n      83 |     message: error.message,\n      84 |     statusCode: error.statusCode || 500,\n      85 |     code: error.code || 'UNKNOWN_ERROR',\n\n      at errorHandler (server/routes/middleware/error-handler.ts:82:11)\n      at Layer.handle_error (node_modules/express/lib/router/layer.js:71:5)\n      at trim_prefix (node_modules/express/lib/router/index.js:326:13)\n      at node_modules/express/lib/router/index.js:286:9\n      at Function.process_params (node_modules/express/lib/router/index.js:346:12)\n      at next (node_modules/express/lib/router/index.js:280:10)\n      at node_modules/express/lib/router/index.js:646:15\n      at next (node_modules/express/lib/router/index.js:265:14)\n      at next (node_modules/express/lib/router/route.js:141:14)\n\n    console.log\n      ğŸ§ª Phase 6 Testing Framework completed\n\n      at Object.<anonymous> (jest.setup.js:35:11)\n\nFAIL server/tests/maya-intelligence-validation-fixed.test.ts\n  â— Console\n\n    console.log\n      ğŸ§ª Phase 6 Testing Framework initialized\n\n      at Object.<anonymous> (jest.setup.js:31:11)\n\n    console.log\n      [dotenv@17.2.2] injecting env (26) from .env -- tip: âš™ï¸  override existing env vars with { override: true }\n\n      at _log (node_modules/dotenv/lib/main.js:139:11)\n\n    console.log\n      ğŸ§  PHASE 3: Cross-Agent Learning Engine initializing...\n\n      at new LocalProcessingEngine (server/services/hybrid-intelligence/local-processing-engine.ts:24:13)\n\n    console.log\n      ğŸ§ª Phase 6 Testing Framework completed\n\n      at Object.<anonymous> (jest.setup.js:35:11)\n\n  â— Maya Intelligence Validation - Fixed â€º Personality Manager Integration â€º should validate FLUX parameters\n\n    Maya FLUX optimization configuration missing\n\n      650 |     const personality = PURE_PERSONALITIES.maya;\n      651 |     if (!personality?.fluxOptimization) {\n    > 652 |       throw new Error('Maya FLUX optimization configuration missing');\n          |             ^\n      653 |     }\n      654 |\n      655 |     // Return the specific shot type parameters from Maya's intelligence\n\n      at Function.getFluxParameters (server/agents/personalities/personality-config.ts:652:13)\n      at Object.<anonymous> (server/tests/maya-intelligence-validation-fixed.test.ts:77:45)\n\nPASS server/__tests__/routes/websites.test.ts\n  â— Console\n\n    console.log\n      ğŸ§ª Phase 6 Testing Framework initialized\n\n      at Object.<anonymous> (jest.setup.js:31:11)\n\n    console.error\n      ğŸš¨ Route Error: {\n        message: 'Name and URL are required',\n        statusCode: 400,\n        code: 'VALIDATION_ERROR',\n        stack: 'RouteError: Name and URL are required\\n' +\n          '    at Object.validation (/Users/MD760HA/SSELFIE-BRAND-STUDIO/server/routes/middleware/error-handler.ts:43:5)\\n' +\n          '    at /Users/MD760HA/SSELFIE-BRAND-STUDIO/server/routes/modules/websites.ts:29:23\\n' +\n          '    at /Users/MD760HA/SSELFIE-BRAND-STUDIO/server/routes/middleware/error-handler.ts:70:21\\n' +\n          '    at Layer.handle [as handle_request] (/Users/MD760HA/SSELFIE-BRAND-STUDIO/node_modules/express/lib/router/layer.js:95:5)\\n' +\n          '    at next (/Users/MD760HA/SSELFIE-BRAND-STUDIO/node_modules/express/lib/router/route.js:149:13)\\n' +\n          '    at requireStackAuth (/Users/MD760HA/SSELFIE-BRAND-STUDIO/server/__tests__/routes/websites.test.ts:15:5)\\n' +\n          '    at Layer.handle [as handle_request] (/Users/MD760HA/SSELFIE-BRAND-STUDIO/node_modules/express/lib/router/layer.js:95:5)\\n' +\n          '    at next (/Users/MD760HA/SSELFIE-BRAND-STUDIO/node_modules/express/lib/router/route.js:149:13)\\n' +\n          '    at Route.dispatch (/Users/MD760HA/SSELFIE-BRAND-STUDIO/node_modules/express/lib/router/route.js:119:3)\\n' +\n          '    at Layer.handle [as handle_request] (/Users/MD760HA/SSELFIE-BRAND-STUDIO/node_modules/express/lib/router/layer.js:95:5)\\n' +\n          '    at /Users/MD760HA/SSELFIE-BRAND-STUDIO/node_modules/express/lib/router/index.js:284:15\\n' +\n          '    at Function.process_params (/Users/MD760HA/SSELFIE-BRAND-STUDIO/node_modules/express/lib/router/index.js:346:12)\\n' +\n          '    at next (/Users/MD760HA/SSELFIE-BRAND-STUDIO/node_modules/express/lib/router/index.js:280:10)\\n' +\n          '    at Function.handle (/Users/MD760HA/SSELFIE-BRAND-STUDIO/node_modules/express/lib/router/index.js:175:3)\\n' +\n          '    at router (/Users/MD760HA/SSELFIE-BRAND-STUDIO/node_modules/express/lib/router/index.js:47:12)\\n' +\n          '    at Layer.handle [as handle_request] (/Users/MD760HA/SSELFIE-BRAND-STUDIO/node_modules/express/lib/router/layer.js:95:5)\\n' +\n          '    at trim_prefix (/Users/MD760HA/SSELFIE-BRAND-STUDIO/node_modules/express/lib/router/index.js:328:13)\\n' +\n          '    at /Users/MD760HA/SSELFIE-BRAND-STUDIO/node_modules/express/lib/router/index.js:286:9\\n' +\n          '    at Function.process_params (/Users/MD760HA/SSELFIE-BRAND-STUDIO/node_modules/express/lib/router/index.js:346:12)\\n' +\n          '    at next (/Users/MD760HA/SSELFIE-BRAND-STUDIO/node_modules/express/lib/router/index.js:280:10)\\n' +\n          '    at /Users/MD760HA/SSELFIE-BRAND-STUDIO/node_modules/body-parser/lib/read.js:137:5\\n' +\n          '    at AsyncResource.runInAsyncScope (node:async_hooks:214:14)\\n' +\n          '    at invokeCallback (/Users/MD760HA/SSELFIE-BRAND-STUDIO/node_modules/raw-body/index.js:238:16)\\n' +\n          '    at done (/Users/MD760HA/SSELFIE-BRAND-STUDIO/node_modules/raw-body/index.js:227:7)\\n' +\n          '    at IncomingMessage.onEnd (/Users/MD760HA/SSELFIE-BRAND-STUDIO/node_modules/raw-body/index.js:287:7)\\n' +\n          '    at IncomingMessage.emit (node:events:518:28)\\n' +\n          '    at endReadableNT (node:internal/streams/readable:1698:12)\\n' +\n          '    at processTicksAndRejections (node:internal/process/task_queues:90:21)',\n        url: '/api/websites',\n        method: 'POST',\n        timestamp: '2025-09-15T18:45:00.813Z'\n      }\n\n      80 | ) => {\n      81 |   // Log error details\n    > 82 |   console.error('ğŸš¨ Route Error:', {\n         |           ^\n      83 |     message: error.message,\n      84 |     statusCode: error.statusCode || 500,\n      85 |     code: error.code || 'UNKNOWN_ERROR',\n\n      at errorHandler (server/routes/middleware/error-handler.ts:82:11)\n      at Layer.handle_error (node_modules/express/lib/router/layer.js:71:5)\n      at trim_prefix (node_modules/express/lib/router/index.js:326:13)\n      at node_modules/express/lib/router/index.js:286:9\n      at Function.process_params (node_modules/express/lib/router/index.js:346:12)\n      at next (node_modules/express/lib/router/index.js:280:10)\n      at node_modules/express/lib/router/index.js:646:15\n      at next (node_modules/express/lib/router/index.js:265:14)\n      at next (node_modules/express/lib/router/route.js:141:14)\n\n    console.error\n      ğŸš¨ Route Error: {\n        message: 'Name and URL are required',\n        statusCode: 400,\n        code: 'VALIDATION_ERROR',\n        stack: 'RouteError: Name and URL are required\\n' +\n          '    at Object.validation (/Users/MD760HA/SSELFIE-BRAND-STUDIO/server/routes/middleware/error-handler.ts:43:5)\\n' +\n          '    at /Users/MD760HA/SSELFIE-BRAND-STUDIO/server/routes/modules/websites.ts:29:23\\n' +\n          '    at /Users/MD760HA/SSELFIE-BRAND-STUDIO/server/routes/middleware/error-handler.ts:70:21\\n' +\n          '    at Layer.handle [as handle_request] (/Users/MD760HA/SSELFIE-BRAND-STUDIO/node_modules/express/lib/router/layer.js:95:5)\\n' +\n          '    at next (/Users/MD760HA/SSELFIE-BRAND-STUDIO/node_modules/express/lib/router/route.js:149:13)\\n' +\n          '    at requireStackAuth (/Users/MD760HA/SSELFIE-BRAND-STUDIO/server/__tests__/routes/websites.test.ts:15:5)\\n' +\n          '    at Layer.handle [as handle_request] (/Users/MD760HA/SSELFIE-BRAND-STUDIO/node_modules/express/lib/router/layer.js:95:5)\\n' +\n          '    at next (/Users/MD760HA/SSELFIE-BRAND-STUDIO/node_modules/express/lib/router/route.js:149:13)\\n' +\n          '    at Route.dispatch (/Users/MD760HA/SSELFIE-BRAND-STUDIO/node_modules/express/lib/router/route.js:119:3)\\n' +\n          '    at Layer.handle [as handle_request] (/Users/MD760HA/SSELFIE-BRAND-STUDIO/node_modules/express/lib/router/layer.js:95:5)\\n' +\n          '    at /Users/MD760HA/SSELFIE-BRAND-STUDIO/node_modules/express/lib/router/index.js:284:15\\n' +\n          '    at Function.process_params (/Users/MD760HA/SSELFIE-BRAND-STUDIO/node_modules/express/lib/router/index.js:346:12)\\n' +\n          '    at next (/Users/MD760HA/SSELFIE-BRAND-STUDIO/node_modules/express/lib/router/index.js:280:10)\\n' +\n          '    at Function.handle (/Users/MD760HA/SSELFIE-BRAND-STUDIO/node_modules/express/lib/router/index.js:175:3)\\n' +\n          '    at router (/Users/MD760HA/SSELFIE-BRAND-STUDIO/node_modules/express/lib/router/index.js:47:12)\\n' +\n          '    at Layer.handle [as handle_request] (/Users/MD760HA/SSELFIE-BRAND-STUDIO/node_modules/express/lib/router/layer.js:95:5)\\n' +\n          '    at trim_prefix (/Users/MD760HA/SSELFIE-BRAND-STUDIO/node_modules/express/lib/router/index.js:328:13)\\n' +\n          '    at /Users/MD760HA/SSELFIE-BRAND-STUDIO/node_modules/express/lib/router/index.js:286:9\\n' +\n          '    at Function.process_params (/Users/MD760HA/SSELFIE-BRAND-STUDIO/node_modules/express/lib/router/index.js:346:12)\\n' +\n          '    at next (/Users/MD760HA/SSELFIE-BRAND-STUDIO/node_modules/express/lib/router/index.js:280:10)\\n' +\n          '    at /Users/MD760HA/SSELFIE-BRAND-STUDIO/node_modules/body-parser/lib/read.js:137:5\\n' +\n          '    at AsyncResource.runInAsyncScope (node:async_hooks:214:14)\\n' +\n          '    at invokeCallback (/Users/MD760HA/SSELFIE-BRAND-STUDIO/node_modules/raw-body/index.js:238:16)\\n' +\n          '    at done (/Users/MD760HA/SSELFIE-BRAND-STUDIO/node_modules/raw-body/index.js:227:7)\\n' +\n          '    at IncomingMessage.onEnd (/Users/MD760HA/SSELFIE-BRAND-STUDIO/node_modules/raw-body/index.js:287:7)\\n' +\n          '    at IncomingMessage.emit (node:events:518:28)\\n' +\n          '    at endReadableNT (node:internal/streams/readable:1698:12)\\n' +\n          '    at processTicksAndRejections (node:internal/process/task_queues:90:21)',\n        url: '/api/websites',\n        method: 'POST',\n        timestamp: '2025-09-15T18:45:00.821Z'\n      }\n\n      80 | ) => {\n      81 |   // Log error details\n    > 82 |   console.error('ğŸš¨ Route Error:', {\n         |           ^\n      83 |     message: error.message,\n      84 |     statusCode: error.statusCode || 500,\n      85 |     code: error.code || 'UNKNOWN_ERROR',\n\n      at errorHandler (server/routes/middleware/error-handler.ts:82:11)\n      at Layer.handle_error (node_modules/express/lib/router/layer.js:71:5)\n      at trim_prefix (node_modules/express/lib/router/index.js:326:13)\n      at node_modules/express/lib/router/index.js:286:9\n      at Function.process_params (node_modules/express/lib/router/index.js:346:12)\n      at next (node_modules/express/lib/router/index.js:280:10)\n      at node_modules/express/lib/router/index.js:646:15\n      at next (node_modules/express/lib/router/index.js:265:14)\n      at next (node_modules/express/lib/router/route.js:141:14)\n\n    console.log\n      ğŸ§ª Phase 6 Testing Framework completed\n\n      at Object.<anonymous> (jest.setup.js:35:11)\n\n\n  â—  Cannot log after tests are done. Did you forget to wait for something async in your test?\n    Attempted to log \"âš ï¸ PHASE 3: Learning initialization error: [DrizzleQueryError: Failed query: select \"id\", \"agent_name\", \"user_id\", \"learning_type\", \"category\", \"data\", \"confidence\", \"frequency\", \"last_seen\", \"created_at\", \"updated_at\" from \"agent_learning\" order by \"agent_learning\".\"confidence\" desc limit $1\n    params: 100] {\n      query: 'select \"id\", \"agent_name\", \"user_id\", \"learning_type\", \"category\", \"data\", \"confidence\", \"frequency\", \"last_seen\", \"created_at\", \"updated_at\" from \"agent_learning\" order by \"agent_learning\".\"confidence\" desc limit $1',\n      params: [ 100 ],\n      cause: AggregateError: \n          at /Users/MD760HA/SSELFIE-BRAND-STUDIO/node_modules/pg-pool/index.js:45:11\n          at processTicksAndRejections (node:internal/process/task_queues:105:5)\n          at /Users/MD760HA/SSELFIE-BRAND-STUDIO/node_modules/src/node-postgres/session.ts:161:13\n          at NodePgPreparedQuery.queryWithCache (/Users/MD760HA/SSELFIE-BRAND-STUDIO/node_modules/src/pg-core/session.ts:71:12)\n          at /Users/MD760HA/SSELFIE-BRAND-STUDIO/node_modules/src/node-postgres/session.ts:154:19\n          at LocalProcessingEngine.initializeCrossAgentLearning (/Users/MD760HA/SSELFIE-BRAND-STUDIO/server/services/hybrid-intelligence/local-processing-engine.ts:41:32) {\n        code: 'ECONNREFUSED',\n        [errors]: [ [Error], [Error] ]\n      }\n    }\".\n\n      56 |       console.log(`ğŸ”¥ PHASE 3: Cached ${this.learningCache.size} high-confidence patterns`);\n      57 |     } catch (error) {\n    > 58 |       console.error('âš ï¸ PHASE 3: Learning initialization error:', error);\n         |               ^\n      59 |     }\n      60 |   }\n      61 |\n\n      at node_modules/pg-pool/index.js:45:11\n      at node_modules/src/node-postgres/session.ts:161:13\n      at NodePgPreparedQuery.queryWithCache (node_modules/src/pg-core/session.ts:71:12)\n      at node_modules/src/node-postgres/session.ts:154:19\n      at LocalProcessingEngine.initializeCrossAgentLearning (server/services/hybrid-intelligence/local-processing-engine.ts:41:32) {\n          code: 'ECONNREFUSED',\n          [errors]: [ [Error], [Error] ]\n        }\n      }\".\n      at console.error (node_modules/@jest/console/build/index.js:124:10)\n      at LocalProcessingEngine.initializeCrossAgentLearning (server/services/hybrid-intelligence/local-processing-engine.ts:58:15)\n\nPASS server/__tests__/integration/service-integration.test.ts\n  â— Console\n\n    console.log\n      ğŸ§ª Phase 6 Testing Framework initialized\n\n      at Object.<anonymous> (jest.setup.js:31:11)\n\n    console.info\n      [2025-09-15T18:45:00.896Z] UserService: Creating new user {\n        \"email\": \"test@example.com\",\n        \"userId\": \"user_1757961900896_ege0p54ud\"\n      }\n\n      at UserService.log (server/services/base-service.ts:52:19)\n\n    console.info\n      [2025-09-15T18:45:00.902Z] UserService: Getting user {\n        \"userId\": \"user123\"\n      }\n\n      at UserService.log (server/services/base-service.ts:52:19)\n\n    console.info\n      [2025-09-15T18:45:00.903Z] UserService: Updating user profile {\n        \"userId\": \"user123\",\n        \"updates\": {\n          \"displayName\": \"Updated User\",\n          \"firstName\": \"Updated\",\n          \"lastName\": \"User\",\n          \"gender\": \"woman\"\n        }\n      }\n\n      at UserService.log (server/services/base-service.ts:52:19)\n\n    console.info\n      [2025-09-15T18:45:00.904Z] UserService: Getting user {\n        \"userId\": \"user123\"\n      }\n\n      at UserService.log (server/services/base-service.ts:52:19)\n\n    console.info\n      [2025-09-15T18:45:00.905Z] AIGenerationService: Generating story draft {\n        \"draftId\": \"draft_1757961900905_bvhfzoknj\",\n        \"concept\": \"A magical adventure\"\n      }\n\n      at AIGenerationService.log (server/services/base-service.ts:52:19)\n\n    console.info\n      [2025-09-15T18:45:00.906Z] AIGenerationService: Generating full story {\n        \"storyId\": \"story_1757961900906_rn53mafws\",\n        \"concept\": \"A magical adventure\"\n      }\n\n      at AIGenerationService.log (server/services/base-service.ts:52:19)\n\n    console.info\n      [2025-09-15T18:45:00.906Z] AIGenerationService: Getting generation status {\n        \"jobId\": \"story123\"\n      }\n\n      at AIGenerationService.log (server/services/base-service.ts:52:19)\n\n    console.info\n      [2025-09-15T18:45:00.907Z] AIGenerationService: Generating video from story {\n        \"videoId\": \"video_1757961900907_irp0p6gbg\"\n      }\n\n      at AIGenerationService.log (server/services/base-service.ts:52:19)\n\n    console.info\n      [2025-09-15T18:45:00.908Z] AIGenerationService: Generating AI images {\n        \"jobId\": \"image_job_1757961900908_qjxrbhnng\",\n        \"prompt\": \"Create a modern website\"\n      }\n\n      at AIGenerationService.log (server/services/base-service.ts:52:19)\n\n    console.info\n      [2025-09-15T18:45:00.909Z] UserService: Creating new user {\n        \"email\": \"test@example.com\",\n        \"userId\": \"user_1757961900909_t4q8jrvbr\"\n      }\n\n      at UserService.log (server/services/base-service.ts:52:19)\n\n    console.info\n      [2025-09-15T18:45:00.909Z] AIGenerationService: Generating story draft {\n        \"draftId\": \"draft_1757961900909_m8zkm28t0\",\n        \"concept\": \"A test story\"\n      }\n\n      at AIGenerationService.log (server/services/base-service.ts:52:19)\n\n    console.log\n      ğŸ§ª Phase 6 Testing Framework completed\n\n      at Object.<anonymous> (jest.setup.js:35:11)\n\n\n  â—  Cannot log after tests are done. Did you forget to wait for something async in your test?\n    Attempted to log \"âš ï¸ PHASE 3: Learning initialization error: [DrizzleQueryError: Failed query: select \"id\", \"agent_name\", \"user_id\", \"learning_type\", \"category\", \"data\", \"confidence\", \"frequency\", \"last_seen\", \"created_at\", \"updated_at\" from \"agent_learning\" order by \"agent_learning\".\"confidence\" desc limit $1\n    params: 100] {\n      query: 'select \"id\", \"agent_name\", \"user_id\", \"learning_type\", \"category\", \"data\", \"confidence\", \"frequency\", \"last_seen\", \"created_at\", \"updated_at\" from \"agent_learning\" order by \"agent_learning\".\"confidence\" desc limit $1',\n      params: [ 100 ],\n      cause: AggregateError: \n          at /Users/MD760HA/SSELFIE-BRAND-STUDIO/node_modules/pg-pool/index.js:45:11\n          at processTicksAndRejections (node:internal/process/task_queues:105:5)\n          at /Users/MD760HA/SSELFIE-BRAND-STUDIO/node_modules/src/node-postgres/session.ts:161:13\n          at NodePgPreparedQuery.queryWithCache (/Users/MD760HA/SSELFIE-BRAND-STUDIO/node_modules/src/pg-core/session.ts:71:12)\n          at /Users/MD760HA/SSELFIE-BRAND-STUDIO/node_modules/src/node-postgres/session.ts:154:19\n          at LocalProcessingEngine.initializeCrossAgentLearning (/Users/MD760HA/SSELFIE-BRAND-STUDIO/server/services/hybrid-intelligence/local-processing-engine.ts:41:32) {\n        code: 'ECONNREFUSED',\n        [errors]: [ [Error], [Error] ]\n      }\n    }\".\n\n      56 |       console.log(`ğŸ”¥ PHASE 3: Cached ${this.learningCache.size} high-confidence patterns`);\n      57 |     } catch (error) {\n    > 58 |       console.error('âš ï¸ PHASE 3: Learning initialization error:', error);\n         |               ^\n      59 |     }\n      60 |   }\n      61 |\n\n      at node_modules/pg-pool/index.js:45:11\n      at node_modules/src/node-postgres/session.ts:161:13\n      at NodePgPreparedQuery.queryWithCache (node_modules/src/pg-core/session.ts:71:12)\n      at node_modules/src/node-postgres/session.ts:154:19\n      at LocalProcessingEngine.initializeCrossAgentLearning (server/services/hybrid-intelligence/local-processing-engine.ts:41:32) {\n          code: 'ECONNREFUSED',\n          [errors]: [ [Error], [Error] ]\n        }\n      }\".\n      at console.error (node_modules/@jest/console/build/index.js:124:10)\n      at LocalProcessingEngine.initializeCrossAgentLearning (server/services/hybrid-intelligence/local-processing-engine.ts:58:15)\n\nPASS server/__tests__/routes/admin.test.ts\n  â— Console\n\n    console.log\n      ğŸ§ª Phase 6 Testing Framework initialized\n\n      at Object.<anonymous> (jest.setup.js:31:11)\n\n    console.log\n      ğŸ§ª Phase 6 Testing Framework completed\n\n      at Object.<anonymous> (jest.setup.js:35:11)\n\nFAIL server/tests/maya-intelligence-validation.test.ts\n  â— Console\n\n    console.log\n      [dotenv@17.2.2] injecting env (26) from .env -- tip: âš™ï¸  load multiple .env files with { path: ['.env.local', '.env'] }\n\n      at _log (node_modules/dotenv/lib/main.js:139:11)\n\n    console.log\n      ğŸ§  PHASE 3: Cross-Agent Learning Engine initializing...\n\n      at new LocalProcessingEngine (server/services/hybrid-intelligence/local-processing-engine.ts:24:13)\n\n    console.log\n      ğŸ§ª Phase 6 Testing Framework initialized\n\n      at Object.<anonymous> (jest.setup.js:31:11)\n\n    console.log\n      Generated prompt length: 14145\n\n      at Object.<anonymous> (server/tests/maya-intelligence-validation.test.ts:21:15)\n\n    console.log\n      First 200 chars: You are Maya, SSELFIE Studio's AI Art Director, Brand Stylist, and Location Scout.\n      \n      YOUR MISSION: To act as a world-class AI Art Director, Brand Stylist, and Location Scout, translating a user's perso\n\n      at Object.<anonymous> (server/tests/maya-intelligence-validation.test.ts:22:15)\n\n    console.log\n      âœ… New Maya personality structure detected!\n\n      at Object.<anonymous> (server/tests/maya-intelligence-validation.test.ts:37:17)\n\n    console.log\n      ğŸ§ª Phase 6 Testing Framework completed\n\n      at Object.<anonymous> (jest.setup.js:35:11)\n\n  â— Maya Optimization Validation â€º New Personality Structure Validation â€º should generate a valid prompt using the new personality structure\n\n    expect(received).toContain(expected) // indexOf\n\n    Expected substring: \"80% of a personal brand\"\n    Received string:    \"You are Maya, SSELFIE Studio's AI Art Director, Brand Stylist, and Location Scout.Â·\n    YOUR MISSION: To act as a world-class AI Art Director, Brand Stylist, and Location Scout, translating a user's personal brand into a cohesive, editorial-quality visual identity.Â·\n    YOUR ROLE: Maya is the user's creative partner. Her primary function is to provide sophisticated visual direction. She is an expert in lighting, composition, fashion, and scenery. She translates core brand values into world-class visual styling and places them in compelling, story-driven locations.Â·\n    CORE PRINCIPLE: Always create 3-5 concept cards. 80% should feature the individual (portraits/lifestyle), while 20% should be supporting flatlay/object imagery that builds the brand world. Maya MUST create both types in every response: portrait concepts AND flatlay/object concepts using the 80/20 rule.Â·\n    AESTHETIC DNA - The SSELFIE Studio Style:\n    â€¢ QUALITY FIRST: All prompts begin with technical keywords that ensure a high-end photographic feel: `raw photo, editorial quality, professional photography, sharp focus, film grain, visible skin pores`.\n    â€¢ NATURAL & AUTHENTIC: Avoid overly perfect, 'plastic' AI looks. Strive for authenticity.Â·Â·\n    â€¢ SOPHISTICATED & UNDERSTATED: The style is elegant and confident, never loud or trendy. It whispers luxury, it doesn't shout.\n    â€¢ FOCUS ON LIGHT: Light is the most important element. Whether it's soft morning light, dramatic shadows, or a golden hour glow, the lighting must be intentional and evocative.Â·\n    CREATIVE EXPERTISE - Your 12 Signature Looks:Â·\n    1. **The Scandinavian Minimalist**\n    Clean, bright, and intentional. Focus on simplicity, natural materials, and light.\n    Keywords: bright and airy, minimalist, hygge, natural light, clean lines, serene, organic\n    Lighting: Soft, diffused daylight flooding the scene, soft morning light, bright overcast day\n    Scenery: Minimalist interiors with light wood floors, rooms with large windows and sheer curtains, serene landscapes, modern Scandinavian architecture, a chic coffee shop with clean design.\n    Fashion Intelligence: Suggests: High-quality basics in neutral palettes (white, beige, grey, black). Think oversized linen shirts, cashmere sweaters, tailored wide-leg trousers, minimalist jewelry.\n    Detail Styling (The \\\"20%\\\"): Suggests: A close-up of a steaming ceramic mug, the texture of a knitted wool blanket, light filtering through a delicate piece of glassware, a stack of minimalist design books.\n    Location Intelligence: Suggests: Copenhagen, Stockholm, Oslo. Minimalist cabins in the Norwegian fjords, modern design museums.Â·\n    2. **The Urban Moody**\n    Sophisticated, atmospheric, and cinematic. For the professional with an edge.\n    Keywords: dark and moody, cinematic, atmospheric, dramatic shadows, urban, sophisticated\n    Lighting: Single-source lighting, dramatic side light, deep shadows, rainy day reflections, ambient city lights at dusk\n    Scenery: A dimly lit corner of a sophisticated cocktail bar, rain-slicked city streets at night, a modern art gallery after hours, industrial-chic loft spaces with exposed brick.\n    Fashion Intelligence: Suggests: All-black ensembles with varying textures (leather, silk, wool). Tailored trench coats, sharp blazers, turtleneck sweaters, polished leather boots.\n    Detail Styling (The \\\"20%\\\"): Suggests: A close-up of a leather-bound notebook and a fountain pen, steam rising from a cup of black coffee, reflections in a puddle, the texture of a dark wool coat.\n    Location Intelligence: Suggests: Berlin, New York (SoHo), London (Shoreditch), the moody streets of Hamburg.Â·\n    3. **The High-End Coastal**\n    Effortless luxury meets the sea. Relaxed, elegant, and aspirational.\n    Keywords: coastal aesthetic, effortless luxury, seaside, serene, natural elegance, breezy\n    Lighting: Soft, warm, golden hour light, bright morning sun with soft shadows, hazy, diffused light\n    Scenery: A minimalist beach house with an ocean view, walking along a serene, empty beach, a cliffside overlook, a chic seaside cafe with natural materials.\n    Fashion Intelligence: Suggests: A neutral, high-quality 'resort' wardrobe. Think flowing linen trousers, silk slip dresses in champagne tones, cashmere wraps, classic sunglasses, bare feet.\n    Detail Styling (The \\\"20%\\\"): Suggests: The texture of sand and water foam, a close-up of a woven rattan bag, a glass of white wine catching the light, delicate footprints in the sand.\n    Location Intelligence: Suggests: The Amalfi Coast (Italy), The Hamptons (USA), Santorini (Greece), the Maldives, Saint-Tropez (France).Â·\n    4. **The Luxury Dark & Moody**\n    Rich, opulent, and mysterious. Think private clubs and old-world elegance.\n    Keywords: dark academia, opulent, rich tones, dramatic, elegant, heritage, mysterious\n    Lighting: Low-key lighting, candlelight, warm lamptight, shadows that conceal more than they reveal\n    Scenery: A historic library with floor-to-ceiling bookshelves, a room with dark wood paneling and a fireplace, a velvet armchair in a dimly lit corner, a beautiful old-world hotel lobby.\n    Fashion Intelligence: Suggests: Rich fabrics and classic silhouettes. Think velvet blazers, silk blouses in jewel tones (emerald, sapphire), tailored wool trousers, classic timepieces.\n    Detail Styling (The \\\"20%\\\"): Suggests: A close-up of a classic leather-bound book, a crystal glass of whiskey, the intricate details of a vintage watch, the texture of velvet upholstery.\n    Location Intelligence: Suggests: Libraries in Oxford or Dublin, historic clubs in London, heritage hotels in Edinburgh or Vienna.Â·\n    5. **The 'White Space' Executive**\n    Modern, powerful, and clean. For the forward-thinking leader.\n    Keywords: clean white aesthetic, modern, minimalist, powerful, architectural, high-tech\n    Lighting: Bright, clean, almost clinical light, architectural shadows, bright studio lighting\n    Scenery: Modern, all-white architectural spaces, minimalist art galleries, a high-tech innovation hub, against a seamless white backdrop.\n    Fashion Intelligence: Suggests: Structured, architectural clothing in monochrome. Sharp-shouldered blazers, asymmetrical tops, tailored jumpsuits, modern silver jewelry.\n    Detail Styling (The \\\"20%\\\"): Suggests: Architectural details of a modern building, a single piece of modern sculpture, a sleek laptop on a clean white surface, abstract patterns of light and shadow.\n    Location Intelligence: Suggests: Modern architectural marvels like the Valencia City of Arts and Sciences (Spain), art galleries in Berlin, high-tech districts in Seoul or Tokyo.Â·\n    6. **The 'Black & Dark' Auteur**\n    Creative, intense, and confident. For the artist and visionary.\n    Keywords: all black aesthetic, dramatic, high contrast, creative, bold, intense\n    Lighting: High-contrast black and white, dramatic single-source light, film noir shadows\n    Scenery: An artist's studio, a dark theater or stage, against a seamless black backdrop, an industrial space with dark metal textures, a dramatic black sand beach.\n    Fashion Intelligence: Suggests: Creative silhouettes in all black. Think avant-garde shapes, interesting textures (leather, neoprene, silk), and bold statement pieces.\n    Detail Styling (The \\\"20%\\\"): Suggests: A close-up of black ink on white paper, the texture of a black leather jacket, abstract light streaks in the dark, a single, sculptural object against a black background.\n    Location Intelligence: Suggests: Industrial districts of Berlin, backstage at a theatre in Paris, the black sand beaches of Iceland or Vik (Iceland).Â·\n    7. **The Golden Hour Glow**\n    Warm, approachable, and authentic. Capturing the magic of the golden hour.\n    Keywords: golden hour, warm light, authentic, approachable, sun-kissed, natural\n    Lighting: The warm, directional, long-shadow light of the hour before sunset. Lens flare is encouraged.\n    Scenery: An open field with tall grass, a quiet city street as the sun sets, a rooftop terrace overlooking a city, a peaceful coastal path.\n    Fashion Intelligence: Suggests: Casual, comfortable, yet stylish clothing that catches the light beautifully. Think soft-knit sweaters, flowing dresses in earthy tones, classic denim, simple gold jewelry.\n    Detail Styling (The \\\"20%\\\"): Suggests: Close-ups of sunlit details like grass or leaves, a hand shielding the sun from the eyes, the warm glow of a drink, long, soft shadows on the ground.\n    Location Intelligence: Suggests: The Tuscan hills (Italy), the lavender fields of Provence (France), the quiet canals of Amsterdam, the deserts of Joshua Tree (USA).Â·\n    8. **The Night Time Luxe**\n    Energetic, sophisticated, and glamorous. The city comes alive at night.\n    Keywords: night luxe, glamorous, city lights, energetic, sophisticated, high fashion\n    Lighting: Neon signs, blurred car light trails (bokeh), streetlights, the ambient glow of the city\n    Scenery: A bustling, high-end city street at night, a rooftop bar with a panoramic city view, crossing a street with light trails, outside a glamorous event.\n    Fashion Intelligence: Suggests: 'Evening out' attire. Think silk dresses, sharp suits, statement coats, high heels, and perhaps a touch of sparkle or shine.\n    Detail Styling (The \\\"20%\\\"): Suggests: A beautifully crafted cocktail, the neon reflection in a building's window, abstract bokeh patterns of city lights, the detail of a designer handbag.\n    Location Intelligence: Suggests: Shibuya Crossing (Tokyo), Times Square (New York), the Champs-Ã‰lysÃ©es (Paris) at night, glamorous districts in Shanghai or Dubai.Â·\n    9. **The Classic B&W**\n    Timeless, emotional, and powerful. Focus on form, texture, and expression.\n    Keywords: black and white, timeless, high contrast, emotional, classic portraiture, texture\n    Lighting: Anything goes, but it must be intentional. High-key for a clean look, low-key for a dramatic one. The focus is on how light and shadow define shapes.\n    Scenery: Often minimal to focus on the subject. A simple studio backdrop, an interesting architectural wall, a natural landscape with strong textures (e.g., dramatic cliffs, ancient trees).\n    Fashion Intelligence: Suggests: Clothing with interesting textures and strong silhouettes. Wool, leather, silk, and structured pieces work exceptionally well as their form is emphasized.\n    Detail Styling (The \\\"20%\\\"): Suggests: Textural close-ups (the grain of wood, the weave of a fabric), architectural lines and shadows, expressive close-ups of hands.\n    Location Intelligence: Suggests: The classic streets of Paris or Rome, the dramatic landscapes of the Scottish Highlands, the stark beauty of the German Alps.Â·\n    10. **The Beige & Sophisticated**\n    Warm, calm, and professional. The new neutral for modern business.\n    Keywords: beige aesthetic, warm neutrals, sophisticated, calm, professional, minimalist warmth\n    Lighting: Soft, warm, diffused light. Think of a bright but cozy room.\n    Scenery: A beautifully designed art gallery, minimalist cafes with warm wood tones, against a textured beige or off-white wall, a serene modern lobby.\n    Fashion Intelligence: Suggests: A tonal wardrobe of beige, cream, camel, and taupe. Think high-quality knitwear, tailored trousers, silk blouses, and classic trench coats.\n    Detail Styling (The \\\"20%\\\"): Suggests: A beautifully made latte with latte art, the pages of a high-end magazine, the texture of a cashmere sweater, minimalist gold jewelry on skin.\n    Location Intelligence: Suggests: The Marais district in Paris, chic cafes in Milan, modern art museums in Germany, luxury shopping streets.Â·\n    11. **The Fashion Street Style**\n    Candid, effortless, and editorial. The 'on-the-go' look of a modern tastemaker.\n    Keywords: street style, effortless, editorial, candid, movement, spontaneous, modern\n    Lighting: Natural daylight, dynamic shadows from urban architecture, diffused light on city streets\n    Scenery: Walking through chic city neighborhoods, outside trendy cafes and boutiques, against interesting architectural backgrounds, in motion on stylish city streets.\n    Fashion Intelligence: Suggests: Layered, thoughtful looks with interesting textures and silhouettes. Think statement coats, perfectly fitted jeans, interesting accessories, comfortable yet stylish shoes.\n    Detail Styling (The \\\"20%\\\"): Suggests: Details of interesting textures and accessories, a close-up of statement jewelry or handbag hardware, the play of light and shadow on fabric, urban architectural elements.\n    Location Intelligence: Suggests: Fashion districts like Soho (New York), Le Marais (Paris), Shoreditch (London), trendy neighborhoods in Milan or Copenhagen.Â·\n    ğŸ¯ CRITICAL: CONCEPT CARD GENERATION TRAININGÂ·\n    MANDATORY RESPONSE FORMAT: When a user asks for styling ideas, photos, or concepts, you MUST create exactly 3-5 concept cards using this format:Â·\n    [EMOJI] **CONCEPT NAME IN ALL CAPS**\n    [Your intelligent styling description explaining why this concept works for the user's goals and brand, drawing from your Creative Lookbook above]Â·\n    FLUX_PROMPT: [Create a detailed, natural language prompt that incorporates the aesthetic DNA principles above and relevant elements from your Creative Lookbook]Â·\n    ---Â·\n    REQUIREMENTS FOR EVERY RESPONSE:\n    â€¢ Always create 3-5 different concept variations\n    â€¢ Start each concept with styling emoji (ğŸ¯âœ¨ğŸ’¼ğŸŒŸğŸ’«ğŸ†ğŸ“¸ğŸ¬)Â·Â·\n    â€¢ Include FLUX_PROMPT with technical quality keywords and natural styling description\n    â€¢ Draw inspiration from your 12 signature looks above\n    â€¢ Use your aesthetic DNA principles in every concept\n    â€¢ Include appropriate camera/lens specifications for the shot type\n    â€¢ Write as natural flowing sentences, not keyword lists\n    â€¢ Separate concepts with \\\"---\\\" line breaks\n    â€¢ Apply the 80/20 principle: ALWAYS include 3-4 portrait/lifestyle concepts (80%) AND 1-2 flatlay/object concepts (20%) drawn from the \\\"Detail Styling\\\" sections of your Creative Looks aboveÂ·\n    VOICE & COMMUNICATION:\n    - Strategic and encouraging: Think about the \\\"why\\\" behind each creative choice\n    - Elegant and efficient: Polished, clear communication that respects the user's timeÂ·Â·\n    - Warm with authority: Friendly but confident - you are the expert\n    - Focus on \\\"you\\\" and \\\"your\\\": Make it personal and bespoke for the user's brand\n    - Inspire, don't just instruct: Frame suggestions as collaborative creative actionsÂ·\n    EXAMPLE PHRASES:\n    \\\"Let's create...\\\"\n    \\\"Your story...\\\"Â·Â·\n    \\\"Perfect for your brand...\\\"\n    \\\"This concept captures...\\\"\n    \\\"I'm excited to see...\\\"\"\n\n      39 |         // Test Core Philosophy elements\n      40 |         expect(generatedPrompt).toContain('Art Director');\n    > 41 |         expect(generatedPrompt).toContain('80% of a personal brand');\n         |                                 ^\n      42 |         \n      43 |         // Test Aesthetic DNA keywords\n      44 |         expect(generatedPrompt).toContain('raw photo, editorial quality');\n\n      at Object.<anonymous> (server/tests/maya-intelligence-validation.test.ts:41:33)\n\n  â— Maya Optimization Validation â€º Contemporary Fashion Intelligence â€º should validate 2025 trend integration\n\n    TypeError: Cannot read properties of undefined (reading 'currentTrends2025')\n\n      67 |       \n      68 |       // Verify 2025 trends are present\n    > 69 |       expect(fashionExpertise.currentTrends2025).toBeDefined();\n         |                               ^\n      70 |       expect(fashionExpertise.currentTrends2025.length).toBeGreaterThan(10);\n      71 |       \n      72 |       // Check for key 2025 trends\n\n      at Object.<anonymous> (server/tests/maya-intelligence-validation.test.ts:69:31)\n\n  â— Maya Optimization Validation â€º Contemporary Fashion Intelligence â€º should validate styling recommendation relevance\n\n    TypeError: Cannot convert undefined or null to object\n        at Function.entries (<anonymous>)\n\n      83 |       \n      84 |       // Verify all styling approaches have proper descriptions\n    > 85 |       Object.entries(MAYA_PERSONALITY.stylingApproaches).forEach(([approach, config]) => {\n         |              ^\n      86 |         expect(config.description).toBeDefined();\n      87 |         expect(config.description.length).toBeGreaterThan(20);\n      88 |         expect(config.vibe).toBeDefined();\n\n      at Object.<anonymous> (server/tests/maya-intelligence-validation.test.ts:85:14)\n\n  â— Maya Optimization Validation â€º Contemporary Fashion Intelligence â€º should verify brand alignment maintenance\n\n    TypeError: Cannot read properties of undefined (reading 'expertAuthority')\n\n      102 |       \n      103 |       // Verify brand positioning elements\n    > 104 |       expect(brandPositioning.expertAuthority).toBeDefined();\n          |                               ^\n      105 |       expect(brandPositioning.trustworthyAdvisor).toBeDefined();\n      106 |       expect(brandPositioning.creativeVisionary).toBeDefined();\n      107 |       expect(brandPositioning.relateableMentor).toBeDefined();\n\n      at Object.<anonymous> (server/tests/maya-intelligence-validation.test.ts:104:31)\n\n  â— Maya Optimization Validation â€º Personalization Engine â€º should validate adaptive learning functionality\n\n    TypeError: Cannot read properties of undefined (reading 'globalStylingAwareness')\n\n      120 |       \n      121 |       // Verify global styling awareness\n    > 122 |       expect(culturalIntelligence.globalStylingAwareness).toBeDefined();\n          |                                   ^\n      123 |       expect(culturalIntelligence.globalStylingAwareness.length).toBeGreaterThan(4);\n      124 |       \n      125 |       // Check for cultural considerations\n\n      at Object.<anonymous> (server/tests/maya-intelligence-validation.test.ts:122:35)\n\n  â— Maya Optimization Validation â€º Personalization Engine â€º should validate context-aware recommendations\n\n    TypeError: Cannot read properties of undefined (reading 'emojiStylingSystem')\n\n      134 |       \n      135 |       // Verify emoji styling system\n    > 136 |       expect(stylingIntelligence.emojiStylingSystem).toBeDefined();\n          |                                  ^\n      137 |       expect(stylingIntelligence.emojiStylingSystem.emojiMeanings).toBeDefined();\n      138 |       \n      139 |       // Check key styling emojis\n\n      at Object.<anonymous> (server/tests/maya-intelligence-validation.test.ts:136:34)\n\n  â— Maya Optimization Validation â€º Personalization Engine â€º should validate memory integration\n\n    TypeError: Cannot read properties of undefined (reading 'strategicQuestioning')\n\n      149 |       \n      150 |       // Verify strategic questioning capabilities\n    > 151 |       expect(coachingIntelligence.strategicQuestioning).toBeDefined();\n          |                                   ^\n      152 |       expect(coachingIntelligence.strategicQuestioning.length).toBeGreaterThan(5);\n      153 |       \n      154 |       // Check business context awareness\n\n      at Object.<anonymous> (server/tests/maya-intelligence-validation.test.ts:151:35)\n\n  â— Maya Optimization Validation â€º Performance Optimization â€º should verify single API call architecture\n\n    expect(received).toBeDefined()\n\n    Received: undefined\n\n      167 |       \n      168 |       // Verify system configuration\n    > 169 |       expect(singleApiCallSystem).toBeDefined();\n          |                                   ^\n      170 |       expect(singleApiCallSystem.description).toContain('single API call');\n      171 |       expect(singleApiCallSystem.mandatoryFormat).toBeDefined();\n      172 |       expect(singleApiCallSystem.requirements).toBeDefined();\n\n      at Object.<anonymous> (server/tests/maya-intelligence-validation.test.ts:169:35)\n\n  â— Maya Optimization Validation â€º Performance Optimization â€º should validate FLUX parameter optimization\n\n    TypeError: Cannot read properties of undefined (reading 'shotTypes')\n\n      178 |       \n      179 |       // Verify shot type configurations\n    > 180 |       expect(fluxOptimization.shotTypes.closeUpPortrait).toBeDefined();\n          |                               ^\n      181 |       expect(fluxOptimization.shotTypes.halfBodyShot).toBeDefined();\n      182 |       expect(fluxOptimization.shotTypes.fullSceneShot).toBeDefined();\n      183 |       \n\n      at Object.<anonymous> (server/tests/maya-intelligence-validation.test.ts:180:31)\n\n  â— Maya Optimization Validation â€º Performance Optimization â€º should validate styling approach consistency\n\n    TypeError: Cannot convert undefined or null to object\n        at Function.entries (<anonymous>)\n\n      197 |       \n      198 |       // Verify each category has required elements\n    > 199 |       Object.entries(categories).forEach(([categoryName, category]) => {\n          |              ^\n      200 |         expect(category.description).toBeDefined();\n      201 |         expect(category.stylingApproaches).toBeDefined();\n      202 |         expect(category.stylingApproaches.length).toBe(5); // Should have exactly 5 approaches\n\n      at Object.<anonymous> (server/tests/maya-intelligence-validation.test.ts:199:14)\n\n  â— Advanced Services Integration â€º should validate visual analysis service integration\n\n    TypeError: maya_visual_analysis_js_1.MayaVisualAnalysisService is not a constructor\n\n      211 |   \n      212 |   test('should validate visual analysis service integration', async () => {\n    > 213 |     const visualService = new MayaVisualAnalysisService();\n          |                           ^\n      214 |     \n      215 |     // Test service initialization\n      216 |     expect(visualService).toBeDefined();\n\n      at Object.<anonymous> (server/tests/maya-intelligence-validation.test.ts:213:27)\n\n  â— Advanced Services Integration â€º should validate trend intelligence service integration\n\n    TypeError: maya_trend_intelligence_js_1.MayaTrendIntelligenceService is not a constructor\n\n      223 |\n      224 |   test('should validate trend intelligence service integration', async () => {\n    > 225 |     const trendService = new MayaTrendIntelligenceService();\n          |                          ^\n      226 |     \n      227 |     // Test service initialization\n      228 |     expect(trendService).toBeDefined();\n\n      at Object.<anonymous> (server/tests/maya-intelligence-validation.test.ts:225:26)\n\n  â— Advanced Services Integration â€º should validate optimization service integration\n\n    expect(received).toBe(expected) // Object.is equality\n\n    Expected: \"function\"\n    Received: \"undefined\"\n\n      241 |     \n      242 |     // Verify optimization capabilities\n    > 243 |     expect(typeof optimizationService.optimizeForUser).toBe('function');\n          |                                                        ^\n      244 |     expect(typeof optimizationService.adaptToPreferences).toBe('function');\n      245 |   });\n      246 | });\n\n      at Object.<anonymous> (server/tests/maya-intelligence-validation.test.ts:243:56)\n\nPASS server/tests/simple-maya-test.test.ts\n  â— Console\n\n    console.log\n      ğŸ§ª Phase 6 Testing Framework initialized\n\n      at Object.<anonymous> (jest.setup.js:31:11)\n\n    console.log\n      ğŸ§ª Phase 6 Testing Framework completed\n\n      at Object.<anonymous> (jest.setup.js:35:11)\n\nPASS server/__tests__/services/user-service.test.ts\n  â— Console\n\n    console.log\n      ğŸ§ª Phase 6 Testing Framework initialized\n\n      at Object.<anonymous> (jest.setup.js:31:11)\n\n    console.info\n      [2025-09-15T18:45:00.969Z] UserService: Getting user {\n        \"userId\": \"user123\"\n      }\n\n      at UserService.log (server/services/base-service.ts:52:19)\n\n    console.info\n      [2025-09-15T18:45:00.970Z] UserService: Getting user {\n        \"userId\": \"nonexistent\"\n      }\n\n      at UserService.log (server/services/base-service.ts:52:19)\n\n    console.warn\n      [2025-09-15T18:45:00.970Z] UserService: User not found {\n        \"userId\": \"nonexistent\"\n      }\n\n      50 |     const serviceName = this.constructor.name;\n      51 |     \n    > 52 |     console[level](`[${timestamp}] ${serviceName}: ${message}`, data ? JSON.stringify(data, null, 2) : '');\n         |                   ^\n      53 |   }\n      54 |\n      55 |   /**\n\n      at UserService.log (server/services/base-service.ts:52:19)\n      at UserService.getUser (server/services/user-service.ts:43:14)\n      at Object.<anonymous> (server/__tests__/services/user-service.test.ts:64:22)\n\n    console.error\n      [2025-09-15T18:45:00.981Z] UserService: Error in getUser {\n        \"error\": \"User ID is required\",\n        \"stack\": \"Error: User ID is required\\n    at UserService.getUser (/Users/MD760HA/SSELFIE-BRAND-STUDIO/server/services/user-service.ts:35:15)\\n    at Object.<anonymous> (/Users/MD760HA/SSELFIE-BRAND-STUDIO/server/__tests__/services/user-service.test.ts:70:32)\\n    at Promise.finally.completed (/Users/MD760HA/SSELFIE-BRAND-STUDIO/node_modules/jest-circus/build/jestAdapterInit.js:1556:28)\\n    at new Promise (<anonymous>)\\n    at callAsyncCircusFn (/Users/MD760HA/SSELFIE-BRAND-STUDIO/node_modules/jest-circus/build/jestAdapterInit.js:1496:10)\\n    at _callCircusTest (/Users/MD760HA/SSELFIE-BRAND-STUDIO/node_modules/jest-circus/build/jestAdapterInit.js:1006:40)\\n    at processTicksAndRejections (node:internal/process/task_queues:105:5)\\n    at _runTest (/Users/MD760HA/SSELFIE-BRAND-STUDIO/node_modules/jest-circus/build/jestAdapterInit.js:946:3)\\n    at _runTestsForDescribeBlock (/Users/MD760HA/SSELFIE-BRAND-STUDIO/node_modules/jest-circus/build/jestAdapterInit.js:839:13)\\n    at _runTestsForDescribeBlock (/Users/MD760HA/SSELFIE-BRAND-STUDIO/node_modules/jest-circus/build/jestAdapterInit.js:829:11)\\n    at _runTestsForDescribeBlock (/Users/MD760HA/SSELFIE-BRAND-STUDIO/node_modules/jest-circus/build/jestAdapterInit.js:829:11)\\n    at run (/Users/MD760HA/SSELFIE-BRAND-STUDIO/node_modules/jest-circus/build/jestAdapterInit.js:757:3)\\n    at runAndTransformResultsToJestFormat (/Users/MD760HA/SSELFIE-BRAND-STUDIO/node_modules/jest-circus/build/jestAdapterInit.js:1917:21)\\n    at jestAdapter (/Users/MD760HA/SSELFIE-BRAND-STUDIO/node_modules/jest-circus/build/runner.js:101:19)\\n    at runTestInternal (/Users/MD760HA/SSELFIE-BRAND-STUDIO/node_modules/jest-runner/build/testWorker.js:275:16)\\n    at runTest (/Users/MD760HA/SSELFIE-BRAND-STUDIO/node_modules/jest-runner/build/testWorker.js:343:7)\\n    at Object.worker (/Users/MD760HA/SSELFIE-BRAND-STUDIO/node_modules/jest-runner/build/testWorker.js:497:12)\"\n      }\n\n      50 |     const serviceName = this.constructor.name;\n      51 |     \n    > 52 |     console[level](`[${timestamp}] ${serviceName}: ${message}`, data ? JSON.stringify(data, null, 2) : '');\n         |                   ^\n      53 |   }\n      54 |\n      55 |   /**\n\n      at UserService.log (server/services/base-service.ts:52:19)\n      at UserService.handleError (server/services/base-service.ts:59:10)\n      at UserService.getUser (server/services/user-service.ts:59:12)\n      at Object.<anonymous> (server/__tests__/services/user-service.test.ts:70:32)\n\n    console.info\n      [2025-09-15T18:45:00.981Z] UserService: Updating user profile {\n        \"userId\": \"user123\",\n        \"updates\": {\n          \"displayName\": \"Updated User\",\n          \"firstName\": \"Updated\",\n          \"lastName\": \"User\",\n          \"gender\": \"woman\",\n          \"profileImageUrl\": \"https://example.com/new-avatar.jpg\"\n        }\n      }\n\n      at UserService.log (server/services/base-service.ts:52:19)\n\n    console.info\n      [2025-09-15T18:45:00.981Z] UserService: Getting user {\n        \"userId\": \"user123\"\n      }\n\n      at UserService.log (server/services/base-service.ts:52:19)\n\n    console.error\n      [2025-09-15T18:45:00.982Z] UserService: Error in updateUserProfile {\n        \"error\": \"Invalid gender value. Must be \\\"man\\\", \\\"woman\\\", or \\\"other\\\"\",\n        \"stack\": \"Error: Invalid gender value. Must be \\\"man\\\", \\\"woman\\\", or \\\"other\\\"\\n    at UserService.updateUserProfile (/Users/MD760HA/SSELFIE-BRAND-STUDIO/server/services/user-service.ts:76:15)\\n    at Object.<anonymous> (/Users/MD760HA/SSELFIE-BRAND-STUDIO/server/__tests__/services/user-service.test.ts:110:21)\\n    at Promise.finally.completed (/Users/MD760HA/SSELFIE-BRAND-STUDIO/node_modules/jest-circus/build/jestAdapterInit.js:1556:28)\\n    at new Promise (<anonymous>)\\n    at callAsyncCircusFn (/Users/MD760HA/SSELFIE-BRAND-STUDIO/node_modules/jest-circus/build/jestAdapterInit.js:1496:10)\\n    at _callCircusTest (/Users/MD760HA/SSELFIE-BRAND-STUDIO/node_modules/jest-circus/build/jestAdapterInit.js:1006:40)\\n    at processTicksAndRejections (node:internal/process/task_queues:105:5)\\n    at _runTest (/Users/MD760HA/SSELFIE-BRAND-STUDIO/node_modules/jest-circus/build/jestAdapterInit.js:946:3)\\n    at _runTestsForDescribeBlock (/Users/MD760HA/SSELFIE-BRAND-STUDIO/node_modules/jest-circus/build/jestAdapterInit.js:839:13)\\n    at _runTestsForDescribeBlock (/Users/MD760HA/SSELFIE-BRAND-STUDIO/node_modules/jest-circus/build/jestAdapterInit.js:829:11)\\n    at _runTestsForDescribeBlock (/Users/MD760HA/SSELFIE-BRAND-STUDIO/node_modules/jest-circus/build/jestAdapterInit.js:829:11)\\n    at run (/Users/MD760HA/SSELFIE-BRAND-STUDIO/node_modules/jest-circus/build/jestAdapterInit.js:757:3)\\n    at runAndTransformResultsToJestFormat (/Users/MD760HA/SSELFIE-BRAND-STUDIO/node_modules/jest-circus/build/jestAdapterInit.js:1917:21)\\n    at jestAdapter (/Users/MD760HA/SSELFIE-BRAND-STUDIO/node_modules/jest-circus/build/runner.js:101:19)\\n    at runTestInternal (/Users/MD760HA/SSELFIE-BRAND-STUDIO/node_modules/jest-runner/build/testWorker.js:275:16)\\n    at runTest (/Users/MD760HA/SSELFIE-BRAND-STUDIO/node_modules/jest-runner/build/testWorker.js:343:7)\\n    at Object.worker (/Users/MD760HA/SSELFIE-BRAND-STUDIO/node_modules/jest-runner/build/testWorker.js:497:12)\"\n      }\n\n      50 |     const serviceName = this.constructor.name;\n      51 |     \n    > 52 |     console[level](`[${timestamp}] ${serviceName}: ${message}`, data ? JSON.stringify(data, null, 2) : '');\n         |                   ^\n      53 |   }\n      54 |\n      55 |   /**\n\n      at UserService.log (server/services/base-service.ts:52:19)\n      at UserService.handleError (server/services/base-service.ts:59:10)\n      at UserService.updateUserProfile (server/services/user-service.ts:93:12)\n      at Object.<anonymous> (server/__tests__/services/user-service.test.ts:110:21)\n\n    console.error\n      [2025-09-15T18:45:00.982Z] UserService: Error in updateUserProfile {\n        \"error\": \"User ID is required\",\n        \"stack\": \"Error: User ID is required\\n    at UserService.updateUserProfile (/Users/MD760HA/SSELFIE-BRAND-STUDIO/server/services/user-service.ts:69:15)\\n    at Object.<anonymous> (/Users/MD760HA/SSELFIE-BRAND-STUDIO/server/__tests__/services/user-service.test.ts:116:21)\\n    at Promise.finally.completed (/Users/MD760HA/SSELFIE-BRAND-STUDIO/node_modules/jest-circus/build/jestAdapterInit.js:1556:28)\\n    at new Promise (<anonymous>)\\n    at callAsyncCircusFn (/Users/MD760HA/SSELFIE-BRAND-STUDIO/node_modules/jest-circus/build/jestAdapterInit.js:1496:10)\\n    at _callCircusTest (/Users/MD760HA/SSELFIE-BRAND-STUDIO/node_modules/jest-circus/build/jestAdapterInit.js:1006:40)\\n    at processTicksAndRejections (node:internal/process/task_queues:105:5)\\n    at _runTest (/Users/MD760HA/SSELFIE-BRAND-STUDIO/node_modules/jest-circus/build/jestAdapterInit.js:946:3)\\n    at _runTestsForDescribeBlock (/Users/MD760HA/SSELFIE-BRAND-STUDIO/node_modules/jest-circus/build/jestAdapterInit.js:839:13)\\n    at _runTestsForDescribeBlock (/Users/MD760HA/SSELFIE-BRAND-STUDIO/node_modules/jest-circus/build/jestAdapterInit.js:829:11)\\n    at _runTestsForDescribeBlock (/Users/MD760HA/SSELFIE-BRAND-STUDIO/node_modules/jest-circus/build/jestAdapterInit.js:829:11)\\n    at run (/Users/MD760HA/SSELFIE-BRAND-STUDIO/node_modules/jest-circus/build/jestAdapterInit.js:757:3)\\n    at runAndTransformResultsToJestFormat (/Users/MD760HA/SSELFIE-BRAND-STUDIO/node_modules/jest-circus/build/jestAdapterInit.js:1917:21)\\n    at jestAdapter (/Users/MD760HA/SSELFIE-BRAND-STUDIO/node_modules/jest-circus/build/runner.js:101:19)\\n    at runTestInternal (/Users/MD760HA/SSELFIE-BRAND-STUDIO/node_modules/jest-runner/build/testWorker.js:275:16)\\n    at runTest (/Users/MD760HA/SSELFIE-BRAND-STUDIO/node_modules/jest-runner/build/testWorker.js:343:7)\\n    at Object.worker (/Users/MD760HA/SSELFIE-BRAND-STUDIO/node_modules/jest-runner/build/testWorker.js:497:12)\"\n      }\n\n      50 |     const serviceName = this.constructor.name;\n      51 |     \n    > 52 |     console[level](`[${timestamp}] ${serviceName}: ${message}`, data ? JSON.stringify(data, null, 2) : '');\n         |                   ^\n      53 |   }\n      54 |\n      55 |   /**\n\n      at UserService.log (server/services/base-service.ts:52:19)\n      at UserService.handleError (server/services/base-service.ts:59:10)\n      at UserService.updateUserProfile (server/services/user-service.ts:93:12)\n      at Object.<anonymous> (server/__tests__/services/user-service.test.ts:116:21)\n\n    console.info\n      [2025-09-15T18:45:00.983Z] UserService: Creating new user {\n        \"email\": \"new@example.com\",\n        \"userId\": \"user_1757961900983_z9tsbu5sr\"\n      }\n\n      at UserService.log (server/services/base-service.ts:52:19)\n\n    console.error\n      [2025-09-15T18:45:00.983Z] UserService: Error in createUser {\n        \"error\": \"Email is required\",\n        \"stack\": \"Error: Email is required\\n    at UserService.createUser (/Users/MD760HA/SSELFIE-BRAND-STUDIO/server/services/user-service.ts:103:15)\\n    at Object.<anonymous> (/Users/MD760HA/SSELFIE-BRAND-STUDIO/server/__tests__/services/user-service.test.ts:158:32)\\n    at Promise.finally.completed (/Users/MD760HA/SSELFIE-BRAND-STUDIO/node_modules/jest-circus/build/jestAdapterInit.js:1556:28)\\n    at new Promise (<anonymous>)\\n    at callAsyncCircusFn (/Users/MD760HA/SSELFIE-BRAND-STUDIO/node_modules/jest-circus/build/jestAdapterInit.js:1496:10)\\n    at _callCircusTest (/Users/MD760HA/SSELFIE-BRAND-STUDIO/node_modules/jest-circus/build/jestAdapterInit.js:1006:40)\\n    at processTicksAndRejections (node:internal/process/task_queues:105:5)\\n    at _runTest (/Users/MD760HA/SSELFIE-BRAND-STUDIO/node_modules/jest-circus/build/jestAdapterInit.js:946:3)\\n    at _runTestsForDescribeBlock (/Users/MD760HA/SSELFIE-BRAND-STUDIO/node_modules/jest-circus/build/jestAdapterInit.js:839:13)\\n    at _runTestsForDescribeBlock (/Users/MD760HA/SSELFIE-BRAND-STUDIO/node_modules/jest-circus/build/jestAdapterInit.js:829:11)\\n    at _runTestsForDescribeBlock (/Users/MD760HA/SSELFIE-BRAND-STUDIO/node_modules/jest-circus/build/jestAdapterInit.js:829:11)\\n    at run (/Users/MD760HA/SSELFIE-BRAND-STUDIO/node_modules/jest-circus/build/jestAdapterInit.js:757:3)\\n    at runAndTransformResultsToJestFormat (/Users/MD760HA/SSELFIE-BRAND-STUDIO/node_modules/jest-circus/build/jestAdapterInit.js:1917:21)\\n    at jestAdapter (/Users/MD760HA/SSELFIE-BRAND-STUDIO/node_modules/jest-circus/build/runner.js:101:19)\\n    at runTestInternal (/Users/MD760HA/SSELFIE-BRAND-STUDIO/node_modules/jest-runner/build/testWorker.js:275:16)\\n    at runTest (/Users/MD760HA/SSELFIE-BRAND-STUDIO/node_modules/jest-runner/build/testWorker.js:343:7)\\n    at Object.worker (/Users/MD760HA/SSELFIE-BRAND-STUDIO/node_modules/jest-runner/build/testWorker.js:497:12)\"\n      }\n\n      50 |     const serviceName = this.constructor.name;\n      51 |     \n    > 52 |     console[level](`[${timestamp}] ${serviceName}: ${message}`, data ? JSON.stringify(data, null, 2) : '');\n         |                   ^\n      53 |   }\n      54 |\n      55 |   /**\n\n      at UserService.log (server/services/base-service.ts:52:19)\n      at UserService.handleError (server/services/base-service.ts:59:10)\n      at UserService.createUser (server/services/user-service.ts:135:12)\n      at Object.<anonymous> (server/__tests__/services/user-service.test.ts:158:32)\n\n    console.info\n      [2025-09-15T18:45:00.984Z] UserService: Getting user by email {\n        \"email\": \"test@example.com\"\n      }\n\n      at UserService.log (server/services/base-service.ts:52:19)\n\n    console.info\n      [2025-09-15T18:45:00.984Z] UserService: Getting user by email {\n        \"email\": \"nonexistent@example.com\"\n      }\n\n      at UserService.log (server/services/base-service.ts:52:19)\n\n    console.warn\n      [2025-09-15T18:45:00.984Z] UserService: User not found by email {\n        \"email\": \"nonexistent@example.com\"\n      }\n\n      50 |     const serviceName = this.constructor.name;\n      51 |     \n    > 52 |     console[level](`[${timestamp}] ${serviceName}: ${message}`, data ? JSON.stringify(data, null, 2) : '');\n         |                   ^\n      53 |   }\n      54 |\n      55 |   /**\n\n      at UserService.log (server/services/base-service.ts:52:19)\n      at UserService.getUserByEmail (server/services/user-service.ts:153:14)\n      at Object.<anonymous> (server/__tests__/services/user-service.test.ts:187:22)\n\n    console.error\n      [2025-09-15T18:45:00.984Z] UserService: Error in getUserByEmail {\n        \"error\": \"Email is required\",\n        \"stack\": \"Error: Email is required\\n    at UserService.getUserByEmail (/Users/MD760HA/SSELFIE-BRAND-STUDIO/server/services/user-service.ts:145:15)\\n    at Object.<anonymous> (/Users/MD760HA/SSELFIE-BRAND-STUDIO/server/__tests__/services/user-service.test.ts:193:32)\\n    at Promise.finally.completed (/Users/MD760HA/SSELFIE-BRAND-STUDIO/node_modules/jest-circus/build/jestAdapterInit.js:1556:28)\\n    at new Promise (<anonymous>)\\n    at callAsyncCircusFn (/Users/MD760HA/SSELFIE-BRAND-STUDIO/node_modules/jest-circus/build/jestAdapterInit.js:1496:10)\\n    at _callCircusTest (/Users/MD760HA/SSELFIE-BRAND-STUDIO/node_modules/jest-circus/build/jestAdapterInit.js:1006:40)\\n    at processTicksAndRejections (node:internal/process/task_queues:105:5)\\n    at _runTest (/Users/MD760HA/SSELFIE-BRAND-STUDIO/node_modules/jest-circus/build/jestAdapterInit.js:946:3)\\n    at _runTestsForDescribeBlock (/Users/MD760HA/SSELFIE-BRAND-STUDIO/node_modules/jest-circus/build/jestAdapterInit.js:839:13)\\n    at _runTestsForDescribeBlock (/Users/MD760HA/SSELFIE-BRAND-STUDIO/node_modules/jest-circus/build/jestAdapterInit.js:829:11)\\n    at _runTestsForDescribeBlock (/Users/MD760HA/SSELFIE-BRAND-STUDIO/node_modules/jest-circus/build/jestAdapterInit.js:829:11)\\n    at run (/Users/MD760HA/SSELFIE-BRAND-STUDIO/node_modules/jest-circus/build/jestAdapterInit.js:757:3)\\n    at runAndTransformResultsToJestFormat (/Users/MD760HA/SSELFIE-BRAND-STUDIO/node_modules/jest-circus/build/jestAdapterInit.js:1917:21)\\n    at jestAdapter (/Users/MD760HA/SSELFIE-BRAND-STUDIO/node_modules/jest-circus/build/runner.js:101:19)\\n    at runTestInternal (/Users/MD760HA/SSELFIE-BRAND-STUDIO/node_modules/jest-runner/build/testWorker.js:275:16)\\n    at runTest (/Users/MD760HA/SSELFIE-BRAND-STUDIO/node_modules/jest-runner/build/testWorker.js:343:7)\\n    at Object.worker (/Users/MD760HA/SSELFIE-BRAND-STUDIO/node_modules/jest-runner/build/testWorker.js:497:12)\"\n      }\n\n      50 |     const serviceName = this.constructor.name;\n      51 |     \n    > 52 |     console[level](`[${timestamp}] ${serviceName}: ${message}`, data ? JSON.stringify(data, null, 2) : '');\n         |                   ^\n      53 |   }\n      54 |\n      55 |   /**\n\n      at UserService.log (server/services/base-service.ts:52:19)\n      at UserService.handleError (server/services/base-service.ts:59:10)\n      at UserService.getUserByEmail (server/services/user-service.ts:169:12)\n      at Object.<anonymous> (server/__tests__/services/user-service.test.ts:193:32)\n\n    console.log\n      ğŸ§ª Phase 6 Testing Framework completed\n\n      at Object.<anonymous> (jest.setup.js:35:11)\n\nPASS server/__tests__/maya-pipeline.test.ts\n  â— Console\n\n    console.log\n      ğŸ§ª STEP 5.1: Maya pipeline tests configured\n\n      at Object.<anonymous> (server/__tests__/maya-pipeline.test.ts:231:9)\n\n    console.log\n      ğŸ“‹ Test coverage: Chat flow, Parameter paths, Intelligence preservation, Caching, Retry logic, Database performance\n\n      at Object.<anonymous> (server/__tests__/maya-pipeline.test.ts:232:9)\n\n    console.log\n      ğŸ§ª Phase 6 Testing Framework initialized\n\n      at Object.<anonymous> (jest.setup.js:31:11)\n\n    console.log\n      ğŸ§ª STEP 5.1: Testing complete Maya chat flow\n\n      at Object.<anonymous> (server/__tests__/maya-pipeline.test.ts:75:15)\n\n    console.log\n      ğŸ“Š Test metrics: Response time target <5s, Intelligence preservation 100%\n\n      at Object.<anonymous> (server/__tests__/maya-pipeline.test.ts:76:15)\n\n    console.log\n      â±ï¸ STEP 5.1: Mock pipeline test completed in 1ms\n\n      at Object.<anonymous> (server/__tests__/maya-pipeline.test.ts:84:15)\n\n    console.log\n      ğŸ”§ STEP 5.1: Testing FLUX parameter architecture - packaged models only\n\n      at Object.<anonymous> (server/__tests__/maya-pipeline.test.ts:90:15)\n\n    console.log\n      ğŸ¯ Testing packaged parameter path\n\n      at Object.<anonymous> (server/__tests__/maya-pipeline.test.ts:101:15)\n\n    console.log\n      âœ… STEP 5.1: Packaged model parameter validation complete\n\n      at Object.<anonymous> (server/__tests__/maya-pipeline.test.ts:111:15)\n\n    console.log\n      ğŸ§  STEP 5.1: Testing Maya intelligence preservation\n\n      at Object.<anonymous> (server/__tests__/maya-pipeline.test.ts:115:15)\n\n    console.log\n      âœ… STEP 5.1: Maya intelligence preservation verified\n\n      at Object.<anonymous> (server/__tests__/maya-pipeline.test.ts:130:15)\n\n    console.log\n      ğŸ“ Full prompt preview: raw photo, visible skin pores, film grain, professional woman in tailored blazer, confident pose, ed...\n\n      at Object.<anonymous> (server/__tests__/maya-pipeline.test.ts:131:15)\n\n    console.log\n      ğŸ’¾ STEP 5.1: Testing response caching system\n\n      at Object.<anonymous> (server/__tests__/maya-pipeline.test.ts:135:15)\n\n    console.log\n      âœ… STEP 5.1: Cache consistency validation complete\n\n      at Object.<anonymous> (server/__tests__/maya-pipeline.test.ts:153:15)\n\n    console.log\n      ğŸ”‘ Cache key format: test-user-123_professional business photos\n\n      at Object.<anonymous> (server/__tests__/maya-pipeline.test.ts:154:15)\n\n    console.log\n      ğŸ”„ STEP 5.1: Testing retry mechanism\n\n      at Object.<anonymous> (server/__tests__/maya-pipeline.test.ts:158:15)\n\n    console.log\n      âœ… STEP 5.1: Retry logic test complete - 3 attempts made\n\n      at Object.<anonymous> (server/__tests__/maya-pipeline.test.ts:185:15)\n\n    console.log\n      ğŸ—„ï¸ STEP 5.1: Testing database performance\n\n      at Object.<anonymous> (server/__tests__/maya-pipeline.test.ts:191:15)\n\n    console.log\n      ğŸ“Š SELECT recent_chats: 50ms\n\n      at server/__tests__/maya-pipeline.test.ts:205:17\n          at Array.forEach (<anonymous>)\n\n    console.log\n      ğŸ“Š INSERT new_message: 30ms\n\n      at server/__tests__/maya-pipeline.test.ts:205:17\n          at Array.forEach (<anonymous>)\n\n    console.log\n      ğŸ“Š UPDATE last_activity: 20ms\n\n      at server/__tests__/maya-pipeline.test.ts:205:17\n          at Array.forEach (<anonymous>)\n\n    console.log\n      âœ… STEP 5.1: Database performance test complete - Total: 100ms\n\n      at Object.<anonymous> (server/__tests__/maya-pipeline.test.ts:211:15)\n\n    console.log\n      ğŸ§ª Phase 6 Testing Framework completed\n\n      at Object.<anonymous> (jest.setup.js:35:11)\n\nPASS server/__tests__/services/base-service.test.ts\n  â— Console\n\n    console.log\n      [dotenv@17.2.2] injecting env (26) from .env -- tip: ğŸ” prevent building .env in docker: https://dotenvx.com/prebuild\n\n      at _log (node_modules/dotenv/lib/main.js:139:11)\n\n    console.log\n      ğŸ§ª Phase 6 Testing Framework initialized\n\n      at Object.<anonymous> (jest.setup.js:31:11)\n\n    console.log\n      ğŸ§ª Phase 6 Testing Framework completed\n\n      at Object.<anonymous> (jest.setup.js:35:11)\n\nPASS server/tests/phase-6-test-runner.ts\n  â— Console\n\n    console.log\n      ğŸ§ª Phase 6 Testing Framework initialized\n\n      at Object.<anonymous> (jest.setup.js:31:11)\n\n    console.log\n      ğŸ§ª PHASE 6.1: Testing Framework Operational\n\n      at Object.<anonymous> (server/tests/phase-6-test-runner.ts:11:13)\n\n    console.log\n      âœ… Maya personality structure validated\n\n      at Object.<anonymous> (server/tests/phase-6-test-runner.ts:38:13)\n\n    console.log\n      âœ… A/B testing framework validated\n\n      at Object.<anonymous> (server/tests/phase-6-test-runner.ts:53:13)\n\n    console.log\n      âœ… Success metrics tracking validated\n\n      at Object.<anonymous> (server/tests/phase-6-test-runner.ts:70:13)\n\n    console.log\n      âœ… Comprehensive testing protocol validated\n\n      at Object.<anonymous> (server/tests/phase-6-test-runner.ts:86:13)\n\n    console.log\n      ğŸ¯ PHASE 6.1 COMPLETE: Testing & Validation Framework Ready\n\n      at Object.<anonymous> (server/tests/phase-6-test-runner.ts:120:13)\n\n    console.log\n      ğŸ“Š Test Coverage: 95%\n\n      at Object.<anonymous> (server/tests/phase-6-test-runner.ts:121:13)\n\n    console.log\n      ğŸ§ª A/B Tests: 3\n\n      at Object.<anonymous> (server/tests/phase-6-test-runner.ts:122:13)\n\n    console.log\n      ğŸ“ˆ Metrics Tracking: Active\n\n      at Object.<anonymous> (server/tests/phase-6-test-runner.ts:123:13)\n\n    console.log\n      âœ… Primary success metrics targets validated\n\n      at Object.<anonymous> (server/tests/phase-6-test-runner.ts:160:13)\n\n    console.log\n      âœ… Technical performance targets validated\n\n      at Object.<anonymous> (server/tests/phase-6-test-runner.ts:184:13)\n\n    console.log\n      ğŸ¯ PHASE 6 TESTING ECOSYSTEM: Complete and Ready\n\n      at Object.<anonymous> (server/tests/phase-6-test-runner.ts:204:13)\n\n    console.log\n      ğŸ§ª All testing frameworks operational\n\n      at Object.<anonymous> (server/tests/phase-6-test-runner.ts:205:13)\n\n    console.log\n      ğŸ“Š Success metrics tracking active\n\n      at Object.<anonymous> (server/tests/phase-6-test-runner.ts:206:13)\n\n    console.log\n      âš¡ Performance monitoring enabled\n\n      at Object.<anonymous> (server/tests/phase-6-test-runner.ts:207:13)\n\n    console.log\n      ğŸ§ª Phase 6 Testing Framework completed\n\n      at Object.<anonymous> (jest.setup.js:35:11)\n\nFAIL server/__tests__/image-generation-pipeline.test.ts\n  â— Test suite failed to run\n\n    Jest encountered an unexpected token\n\n    Jest failed to parse a file. This happens e.g. when your code or its dependencies use non-standard JavaScript syntax, or when Jest is not configured to support such syntax.\n\n    Out of the box Jest supports Babel, which will be used to transform your files into valid JS based on your Babel configuration.\n\n    By default \"node_modules\" folder is ignored by transformers.\n\n    Here's what you can do:\n     â€¢ If you are trying to use ECMAScript Modules, see https://jestjs.io/docs/ecmascript-modules for how to enable it.\n     â€¢ If you are trying to use TypeScript, see https://jestjs.io/docs/getting-started#using-typescript\n     â€¢ To have some of your \"node_modules\" files transformed, you can specify a custom \"transformIgnorePatterns\" in your config.\n     â€¢ If you need a custom transformation, specify a \"transform\" option in your config.\n     â€¢ If you simply want to mock your non-JS modules (e.g. binary assets) you can stub them out with the \"moduleNameMapper\" config option.\n\n    You'll find more details and examples of these config options in the docs:\n    https://jestjs.io/docs/configuration\n    For information about custom transformations, see:\n    https://jestjs.io/docs/code-transformation\n\n    Details:\n\n    /Users/MD760HA/SSELFIE-BRAND-STUDIO/node_modules/jose/dist/webapi/index.js:1\n    export { compactDecrypt } from './jwe/compact/decrypt.js';\n    ^^^^^^\n\n    SyntaxError: Unexpected token 'export'\n\n    > 1 | import { jwtVerify, createRemoteJWKSet } from 'jose';\n        | ^\n      2 | import fs from 'fs';\n      3 | import path from 'path';\n      4 | import type { Request, Response, NextFunction } from 'express';\n\n      at Runtime.createScriptFromCode (node_modules/jest-runtime/build/index.js:1318:40)\n      at Object.<anonymous> (server/stack-auth.ts:1:1)\n      at Object.<anonymous> (server/routes.ts:9:1)\n      at Object.<anonymous> (server/index.ts:4:1)\n      at Object.<anonymous> (server/__tests__/image-generation-pipeline.test.ts:5:1)\n\nFAIL server/__tests__/routes/utility.test.ts (30.791 s)\n  â— Console\n\n    console.log\n      ğŸ§ª Phase 6 Testing Framework initialized\n\n      at Object.<anonymous> (jest.setup.js:31:11)\n\n    console.log\n      ğŸ§ª Phase 6 Testing Framework completed\n\n      at Object.<anonymous> (jest.setup.js:35:11)\n\n  â— Utility Routes â€º GET /training-zip/:filename â€º should download file when it exists\n\n    thrown: \"Exceeded timeout of 30000 ms for a test.\n    Add a timeout value to this test to increase the timeout, if this is a long-running test. See https://jestjs.io/docs/api#testname-fn-timeout.\"\n\n      70 |\n      71 |   describe('GET /training-zip/:filename', () => {\n    > 72 |     it('should download file when it exists', async () => {\n         |     ^\n      73 |       const filename = 'test-training.zip';\n      74 |       const filePath = path.join(process.cwd(), 'training-zips', filename);\n      75 |       \n\n      at server/__tests__/routes/utility.test.ts:72:5\n      at server/__tests__/routes/utility.test.ts:71:3\n      at Object.<anonymous> (server/__tests__/routes/utility.test.ts:16:1)\n\nFAIL server/__tests__/maya-performance.test.ts (45.994 s)\n  â— Console\n\n    console.log\n      ğŸ§ª STEP 5.2: Maya performance tests configured\n\n      at Object.<anonymous> (server/__tests__/maya-performance.test.ts:418:9)\n\n    console.log\n      ğŸ“‹ Performance test coverage: Response time, Concurrent load, Caching, Database queries, Error rates, Recovery\n\n      at Object.<anonymous> (server/__tests__/maya-performance.test.ts:419:9)\n\n    console.log\n      ğŸ¯ Performance targets: <5s response, >95% success rate, efficient caching, <75ms avg DB queries\n\n      at Object.<anonymous> (server/__tests__/maya-performance.test.ts:420:9)\n\n    console.log\n      ğŸ§ª Phase 6 Testing Framework initialized\n\n      at Object.<anonymous> (jest.setup.js:31:11)\n\n    console.log\n      â±ï¸ STEP 5.2: Testing chat response time performance\n\n      at Object.<anonymous> (server/__tests__/maya-performance.test.ts:40:15)\n\n    console.log\n      ğŸ’¬ \"Professional business photos\" â†’ 1943.00ms (Business)\n\n      at Object.<anonymous> (server/__tests__/maya-performance.test.ts:58:17)\n\n    console.log\n      ğŸ’¬ \"Casual lifestyle shots\" â†’ 1549.00ms (Lifestyle)\n\n      at Object.<anonymous> (server/__tests__/maya-performance.test.ts:58:17)\n\n    console.log\n      ğŸ’¬ \"Travel adventure photos\" â†’ 1890.00ms (Travel)\n\n      at Object.<anonymous> (server/__tests__/maya-performance.test.ts:58:17)\n\n    console.log\n      ğŸ’¬ \"Getting ready photos\" â†’ 991.00ms (GRWM)\n\n      at Object.<anonymous> (server/__tests__/maya-performance.test.ts:58:17)\n\n    console.log\n      ğŸ“Š Average response time: 1593.25ms\n\n      at Object.<anonymous> (server/__tests__/maya-performance.test.ts:67:15)\n\n    console.log\n      âœ… STEP 5.2: Chat response performance validated\n\n      at Object.<anonymous> (server/__tests__/maya-performance.test.ts:70:15)\n\n    console.log\n      ğŸš€ STEP 5.2: Testing concurrent request performance\n\n      at Object.<anonymous> (server/__tests__/maya-performance.test.ts:74:15)\n\n    console.log\n      âš¡ 10 concurrent requests completed in 2473.00ms\n\n      at Object.<anonymous> (server/__tests__/maya-performance.test.ts:85:15)\n\n    console.log\n      ğŸ“ˆ Average per-request time under load: 247.30ms\n\n      at Object.<anonymous> (server/__tests__/maya-performance.test.ts:96:15)\n\n    console.log\n      âœ… STEP 5.2: Concurrent load performance validated\n\n      at Object.<anonymous> (server/__tests__/maya-performance.test.ts:97:15)\n\n    console.log\n      ğŸ’¾ STEP 5.2: Testing caching system effectiveness\n\n      at Object.<anonymous> (server/__tests__/maya-performance.test.ts:103:15)\n\n    console.log\n      ğŸ” Cache MISS for: \"Professional business photos\"\n\n      at Object.<anonymous> (server/__tests__/maya-performance.test.ts:126:19)\n\n    console.log\n      ğŸ” Cache MISS for: \"Casual lifestyle shots\"\n\n      at Object.<anonymous> (server/__tests__/maya-performance.test.ts:126:19)\n\n    console.log\n      âš¡ Cache HIT for: \"Professional business photos\"\n\n      at Object.<anonymous> (server/__tests__/maya-performance.test.ts:123:19)\n\n    console.log\n      ğŸ” Cache MISS for: \"Travel photos\"\n\n      at Object.<anonymous> (server/__tests__/maya-performance.test.ts:126:19)\n\n    console.log\n      âš¡ Cache HIT for: \"Casual lifestyle shots\"\n\n      at Object.<anonymous> (server/__tests__/maya-performance.test.ts:123:19)\n\n    console.log\n      âš¡ Cache HIT for: \"Professional business photos\"\n\n      at Object.<anonymous> (server/__tests__/maya-performance.test.ts:123:19)\n\n    console.log\n      ğŸ“Š Cache performance:\n\n      at Object.<anonymous> (server/__tests__/maya-performance.test.ts:140:15)\n\n    console.log\n        Hits: 3, Misses: 3\n\n      at Object.<anonymous> (server/__tests__/maya-performance.test.ts:141:15)\n\n    console.log\n        Hit rate: 50.0%\n\n      at Object.<anonymous> (server/__tests__/maya-performance.test.ts:142:15)\n\n    console.log\n      âœ… STEP 5.2: Cache hit rate validation complete\n\n      at Object.<anonymous> (server/__tests__/maya-performance.test.ts:145:15)\n\n    console.log\n      â° STEP 5.2: Testing cache TTL expiration\n\n      at Object.<anonymous> (server/__tests__/maya-performance.test.ts:149:15)\n\n    console.log\n      âœ… STEP 5.2: Cache TTL expiration working correctly\n\n      at Object.<anonymous> (server/__tests__/maya-performance.test.ts:181:15)\n\n    console.log\n      ğŸ—„ï¸ STEP 5.2: Testing database query performance\n\n      at Object.<anonymous> (server/__tests__/maya-performance.test.ts:187:15)\n\n    console.log\n      ğŸ“Š getUserRecentChats: 82.00ms (target: <100ms)\n\n      at Object.<anonymous> (server/__tests__/maya-performance.test.ts:206:17)\n\n    console.log\n      ğŸ“Š insertChatMessage: 42.00ms (target: <50ms)\n\n      at Object.<anonymous> (server/__tests__/maya-performance.test.ts:206:17)\n\n    console.log\n      ğŸ“Š updateLastActivity: 19.00ms (target: <30ms)\n\n      at Object.<anonymous> (server/__tests__/maya-performance.test.ts:206:17)\n\n    console.log\n      ğŸ“Š getChatMessages: 59.00ms (target: <80ms)\n\n      at Object.<anonymous> (server/__tests__/maya-performance.test.ts:206:17)\n\n    console.log\n      ğŸ“Š saveChatToHistory: 55.00ms (target: <60ms)\n\n      at Object.<anonymous> (server/__tests__/maya-performance.test.ts:206:17)\n\n    console.log\n      âš¡ Average database query time: 51.40ms\n\n      at Object.<anonymous> (server/__tests__/maya-performance.test.ts:212:15)\n\n    console.log\n      âœ… STEP 5.2: Database performance validation complete\n\n      at Object.<anonymous> (server/__tests__/maya-performance.test.ts:215:15)\n\n    console.log\n      ğŸŠ STEP 5.2: Testing database connection pooling\n\n      at Object.<anonymous> (server/__tests__/maya-performance.test.ts:219:15)\n\n    console.log\n      ğŸ”— Operation 1: 0ms wait, 122ms execute\n\n      at server/__tests__/maya-performance.test.ts:236:17\n          at Array.forEach (<anonymous>)\n\n    console.log\n      ğŸ”— Operation 2: 0ms wait, 133ms execute\n\n      at server/__tests__/maya-performance.test.ts:236:17\n          at Array.forEach (<anonymous>)\n\n    console.log\n      ğŸ”— Operation 3: 0ms wait, 129ms execute\n\n      at server/__tests__/maya-performance.test.ts:236:17\n          at Array.forEach (<anonymous>)\n\n    console.log\n      ğŸ”— Operation 4: 0ms wait, 111ms execute\n\n      at server/__tests__/maya-performance.test.ts:236:17\n          at Array.forEach (<anonymous>)\n\n    console.log\n      ğŸ”— Operation 5: 0ms wait, 146ms execute\n\n      at server/__tests__/maya-performance.test.ts:236:17\n          at Array.forEach (<anonymous>)\n\n    console.log\n      ğŸ”— Operation 6: 0ms wait, 102ms execute\n\n      at server/__tests__/maya-performance.test.ts:236:17\n          at Array.forEach (<anonymous>)\n\n    console.log\n      ğŸ”— Operation 7: 0ms wait, 72ms execute\n\n      at server/__tests__/maya-performance.test.ts:236:17\n          at Array.forEach (<anonymous>)\n\n    console.log\n      ğŸ”— Operation 8: 0ms wait, 140ms execute\n\n      at server/__tests__/maya-performance.test.ts:236:17\n          at Array.forEach (<anonymous>)\n\n    console.log\n      ğŸ”— Operation 9: 0ms wait, 149ms execute\n\n      at server/__tests__/maya-performance.test.ts:236:17\n          at Array.forEach (<anonymous>)\n\n    console.log\n      ğŸ”— Operation 10: 0ms wait, 98ms execute\n\n      at server/__tests__/maya-performance.test.ts:236:17\n          at Array.forEach (<anonymous>)\n\n    console.log\n      ğŸ”— Operation 11: 77ms wait, 146ms execute\n\n      at server/__tests__/maya-performance.test.ts:236:17\n          at Array.forEach (<anonymous>)\n\n    console.log\n      ğŸ”— Operation 12: 98ms wait, 70ms execute\n\n      at server/__tests__/maya-performance.test.ts:236:17\n          at Array.forEach (<anonymous>)\n\n    console.log\n      ğŸ”— Operation 13: 109ms wait, 71ms execute\n\n      at server/__tests__/maya-performance.test.ts:236:17\n          at Array.forEach (<anonymous>)\n\n    console.log\n      ğŸ”— Operation 14: 121ms wait, 103ms execute\n\n      at server/__tests__/maya-performance.test.ts:236:17\n          at Array.forEach (<anonymous>)\n\n    console.log\n      ğŸ”— Operation 15: 121ms wait, 66ms execute\n\n      at server/__tests__/maya-performance.test.ts:236:17\n          at Array.forEach (<anonymous>)\n\n    console.log\n      âœ… STEP 5.2: Database connection pooling validated\n\n      at Object.<anonymous> (server/__tests__/maya-performance.test.ts:239:15)\n\n    console.log\n      ğŸ“Š STEP 5.2: Testing error rate under normal conditions\n\n      at Object.<anonymous> (server/__tests__/maya-performance.test.ts:245:15)\n\n    console.log\n      ğŸ”„ STEP 5.2: Testing recovery from temporary failures\n\n      at Object.<anonymous> (server/__tests__/maya-performance.test.ts:275:15)\n\n    console.log\n      âœ… Successful recovery after 3 attempts\n\n      at Object.<anonymous> (server/__tests__/maya-performance.test.ts:314:15)\n\n    console.log\n      âŒ Permanent failure after 3 attempts (expected)\n\n      at Object.<anonymous> (server/__tests__/maya-performance.test.ts:321:17)\n\n    console.log\n      âœ… STEP 5.2: Recovery mechanism validation complete\n\n      at Object.<anonymous> (server/__tests__/maya-performance.test.ts:324:15)\n\n    console.log\n      ğŸ§ª Phase 6 Testing Framework completed\n\n      at Object.<anonymous> (jest.setup.js:35:11)\n\n  â— Maya Performance Testing â€º STEP 5.2: Error Rate & Recovery â€º should maintain low error rate under normal conditions\n\n    thrown: \"Exceeded timeout of 30000 ms for a test.\n    Add a timeout value to this test to increase the timeout, if this is a long-running test. See https://jestjs.io/docs/api#testname-fn-timeout.\"\n\n      242 |\n      243 |   describe('STEP 5.2: Error Rate & Recovery', () => {\n    > 244 |     test('should maintain low error rate under normal conditions', async () => {\n          |         ^\n      245 |       console.log('ğŸ“Š STEP 5.2: Testing error rate under normal conditions');\n      246 |       \n      247 |       const requests = 50;\n\n      at server/__tests__/maya-performance.test.ts:244:9\n      at server/__tests__/maya-performance.test.ts:243:11\n      at Object.<anonymous> (server/__tests__/maya-performance.test.ts:8:9)\n\nA worker process has failed to exit gracefully and has been force exited. This is likely caused by tests leaking due to improper teardown. Try running with --detectOpenHandles to find leaks. Active timers can also cause this, ensure that .unref() was called on them.\nTest Suites: 9 failed, 9 passed, 18 total\nTests:       34 failed, 107 passed, 141 total\nSnapshots:   0 total\nTime:        47.217 s\nRan all test suites.\n",
        "timestamp": "2025-09-15T18:45:46.296Z"
      },
      {
        "message": "âš  .gitignore should exclude .DS_Store",
        "details": "",
        "timestamp": "2025-09-15T18:45:59.248Z"
      },
      {
        "message": "âš  MobileTabLayout.tsx may need mobile optimization",
        "details": "",
        "timestamp": "2025-09-15T18:45:59.254Z"
      },
      {
        "message": "âš  AppLayout.tsx may need mobile optimization",
        "details": "",
        "timestamp": "2025-09-15T18:45:59.254Z"
      },
      {
        "message": "âš  AppLayout.tsx could use more error handling",
        "details": "",
        "timestamp": "2025-09-15T18:45:59.256Z"
      }
    ],
    "passed": 59,
    "failed": 2,
    "total": 83
  }
}